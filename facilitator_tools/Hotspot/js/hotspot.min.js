function d2log(t){"undefined"!=typeof D2LDEBUG&&D2LDEBUG&&console.log(t)}var D2LDEBUG=!1,HotSpotApp={AppData:null,sceneNum:0,maxScenes:null,containerRef:null,mobileDevice:!1,activeActivity:!1,ti:1,currentAttempts:0,headingLevel:null,normalState:null,completeState:null,wrongState:null,restartButton:null,startButton:null,nextButton:null,noPost:!1,allCompleted:[],correctCheck:[]},x,y,i,j,theta,HS_postActivityText,HS_appContainer,HS_questionContainer,HS_hotSpot,HS_imageMapAreas,HS_question,questionFile,validSrc,code,link;HotSpotApp.resetActivityData=function(){HotSpotApp.allCompleted=[],HotSpotApp.correctCheck=[]},HotSpotApp.setupApp=function(t,e){questionFile=t,null!==document.getElementById(e)?(HotSpotApp.containerRef=document.getElementById(e),HotSpotApp.getAppData(HotSpotApp.buildApp)):d2log("ERROR: Missing specified DOM object in HotSpotApp.setupApp()."),$("#HS_screenAlt").click(function(){window.location=this.href})},HotSpotApp.getAppData=function(t){var e=$.getJSON(questionFile,function(e){HotSpotApp.AppData=e,t(HotSpotApp.AppData)});e.fail(function(t){d2log("ERROR: Failed to load data from specified file. Ensure that the file path is correct and that JSON the JSON data is valid. (Use a validator like: http://jsonformatter.curiousconcept.com/ )"),d2log(t)})},HotSpotApp.buildApp=function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(HotSpotApp.mobileDevice=!0),parseInt(HotSpotApp.AppData.ShowScenes)>HotSpotApp.AppData.Scenes.length?HotSpotApp.maxScenes=HotSpotApp.AppData.Scenes.length:HotSpotApp.maxScenes=parseInt(HotSpotApp.AppData.ShowScenes),HotSpotApp.Scenes=HotSpotApp.AppData.Scenes,HotSpotApp.headingLevel=parseInt(HotSpotApp.AppData.HeadingLevel),null===HotSpotApp.headingLevel||void 0===HotSpotApp.headingLevel||"none"===HotSpotApp.headingLevel||isNaN(HotSpotApp.headingLevel)||""===HotSpotApp.headingLevel?HotSpotApp.headingLevel=1:HotSpotApp.headingLevel>4&&(HotSpotApp.headingLevel=4),HotSpotApp.AppData.Randomize===!0&&HotSpotApp.shuffle(HotSpotApp.Scenes),!("none"!==HotSpotApp.AppData.PostActivityText&&""!==HotSpotApp.AppData.PostActivityText&&null!==HotSpotApp.AppData.PostActivityText&&void 0!==HotSpotApp.AppData.PostActivityText||"none"!==HotSpotApp.AppData.PostActivityMedia&&""!==HotSpotApp.AppData.PostActivityMedia&&null!==HotSpotApp.AppData.PostActivityMedia&&void 0!==HotSpotApp.AppData.PostActivityMedia)?HotSpotApp.noPost=!0:HotSpotApp.noPost=!1,HotSpotApp.buildColourKeys(),HotSpotApp.buildAppFrame(),HotSpotApp.loadButtons(),!("none"!==HotSpotApp.AppData.PreActivityText&&""!==HotSpotApp.AppData.PreActivityText&&null!==HotSpotApp.AppData.PreActivityText&&void 0!==HotSpotApp.AppData.PreActivityText||"none"!==HotSpotApp.AppData.PreActivityMedia&&""!==HotSpotApp.AppData.PreActivityMedia&&null!==HotSpotApp.AppData.PreActivityMedia&&void 0!==HotSpotApp.AppData.PreActivityMedia)?HotSpotApp.buildActivity():HotSpotApp.buildPreActivity(),$(HotSpotApp.containerRef).addClass("rs_preserve")},HotSpotApp.buildColourKeys=function(){var t=HotSpotApp.AppData.visibleStyle.colour.substr(1,HotSpotApp.AppData.visibleStyle.colour.length),e=parseInt(HotSpotApp.AppData.visibleStyle.opacity.substr(0,HotSpotApp.AppData.visibleStyle.opacity.length-1))/100,p=HotSpotApp.AppData.visibleStyle.stroke,o=HotSpotApp.AppData.visibleStyle.strokeColour.substr(1,HotSpotApp.AppData.visibleStyle.strokeColour.length),i=parseInt(HotSpotApp.AppData.visibleStyle.strokeWidth),n=HotSpotApp.AppData.highlightStyle.colour.substr(1,HotSpotApp.AppData.highlightStyle.colour.length),a=parseInt(HotSpotApp.AppData.highlightStyle.opacity.substr(0,HotSpotApp.AppData.highlightStyle.opacity.length-1))/100,S=HotSpotApp.AppData.highlightStyle.stroke,A=HotSpotApp.AppData.highlightStyle.strokeColour.substr(1,HotSpotApp.AppData.highlightStyle.strokeColour.length),s=parseInt(HotSpotApp.AppData.highlightStyle.strokeWidth);HotSpotApp.normalState={staticState:!0,highlight:!0,fade:!1,fadeDuration:0},HotSpotApp.correctState={fillColor:"00FF00",fillOpacity:.35},HotSpotApp.wrongState={fillColor:"FF0000",fillOpacity:.35},HotSpotApp.AppData.visible===!0?(HotSpotApp.normalState.fillColor=t,HotSpotApp.normalState.fillOpacity=e,HotSpotApp.normalState.stroke=p,p===!0&&(HotSpotApp.normalState.strokeColor=o,HotSpotApp.normalState.strokeWidth=i)):HotSpotApp.AppData.highlight===!0&&HotSpotApp.mobileDevice===!0?(HotSpotApp.normalState.fillColor=n,HotSpotApp.normalState.fillOpacity=a/2,HotSpotApp.normalState.stroke=S,S===!0&&(HotSpotApp.normalState.strokeColor=A,HotSpotApp.normalState.strokeWidth=s,HotSpotApp.normalState.strokeOpacity=.5)):(HotSpotApp.normalState.fillColor="FFFFFF",HotSpotApp.normalState.fillOpacity=0),HotSpotApp.AppData.highlight===!0?(HotSpotApp.normalState.render_highlight={},HotSpotApp.normalState.render_highlight.fillColor=n,HotSpotApp.normalState.render_highlight.fillOpacity=a,HotSpotApp.normalState.render_highlight.stroke=S,S===!0&&(HotSpotApp.normalState.render_highlight.strokeColor=A,HotSpotApp.normalState.render_highlight.strokeWidth=s)):(HotSpotApp.normalState.render_highlight={},HotSpotApp.normalState.render_highlight.fillColor="FFFFFF",HotSpotApp.normalState.render_highlight.fillOpacity=0,HotSpotApp.normalState.render_highlight.stroke=!0,HotSpotApp.normalState.render_highlight.strokeColor="00FFFF",HotSpotApp.normalState.render_highlight.strokeWidth=3)},HotSpotApp.buildAppFrame=function(){var t=document.createElement("section");t.id="HS_container";var e=document.createElement("section");e.id="HS_content";var p=document.createElement("section");p.id="HS_header",$(p).addClass("bg-dark"),p.innerHTML="<h"+HotSpotApp.headingLevel+">"+HotSpotApp.AppData.ActivityName+"</h"+HotSpotApp.headingLevel+">",t.appendChild(e),$(t).appendTo(HotSpotApp.containerRef),HS_appContainer=document.createElement("div"),HS_appContainer.id="HS_appContainer",$(p).hide().appendTo(e).slideDown(500,"swing"),e.appendChild(HS_appContainer)},HotSpotApp.loadButtons=function(){var t=document.createElement("button");t.id="HS_restartButton",t.setAttribute("class","HS_button"),t.setAttribute("title","Restarts the Activity"),t.onclick=function(){HotSpotApp.clearStage(),HotSpotApp.resetActivityData(),HotSpotApp.sceneNum=0,!("none"!==HotSpotApp.AppData.PreActivityText&&""!==HotSpotApp.AppData.PreActivityText&&null!==HotSpotApp.AppData.PreActivityText&&void 0!==HotSpotApp.AppData.PreActivityText||"none"!==HotSpotApp.AppData.PreActivityMedia&&""!==HotSpotApp.AppData.PreActivityMedia&&null!==HotSpotApp.AppData.PreActivityMedia&&void 0!==HotSpotApp.AppData.PreActivityMedia)?HotSpotApp.buildActivity():HotSpotApp.buildPreActivity()};var e=document.createElement("span");e.setAttribute("class","HS_buttonLabel"),e.innerHTML="Reset Activity",t.appendChild(e),HotSpotApp.restartButton=t;var p=document.createElement("button");p.id="HS_startButton",p.setAttribute("class","HS_button"),p.setAttribute("title","Starts the Activity"),p.onclick=function(){HotSpotApp.clearStage(),HotSpotApp.buildActivity()};var o=document.createElement("span");o.setAttribute("class","HS_buttonLabel"),o.innerHTML="Start Activity",p.appendChild(o),HotSpotApp.startButton=p;var i=document.createElement("button");i.id="HS_nextButton",i.setAttribute("class","HS_button"),i.setAttribute("title","Moves to the Next Part of the Activity"),i.onclick=function(){HotSpotApp.clearStage(),HotSpotApp.sceneNum++,HotSpotApp.sceneNum<HotSpotApp.maxScenes?(HotSpotApp.resetActivityData(),HotSpotApp.buildActivity()):HotSpotApp.noPost===!0?(HotSpotApp.currentAttempts++,HotSpotApp.onComplete(),HotSpotApp.resetActivityData(),HotSpotApp.sceneNum=0,HotSpotApp.buildActivity()):(HotSpotApp.currentAttempts++,HotSpotApp.onComplete(),HotSpotApp.buildPostActivity())};var n=document.createElement("span");n.setAttribute("class","HS_buttonLabel"),i.appendChild(n),HotSpotApp.nextButton=i},HotSpotApp.buildPreActivity=function(){if("none"!==HotSpotApp.AppData.PreActivityText&&""!==HotSpotApp.AppData.PreActivityText&&null!==HotSpotApp.AppData.PreActivityText&&void 0!==HotSpotApp.AppData.PreActivityText){var t=document.createElement("p");t.id="HS_preActivityText",t.innerHTML=HotSpotApp.AppData.PreActivityText,$(t).hide().appendTo(HS_appContainer).fadeIn(500)}if("none"!==HotSpotApp.AppData.PreActivityMedia&&""!==HotSpotApp.AppData.PreActivityMedia&&null!==HotSpotApp.AppData.PreActivityMedia&&void 0!==HotSpotApp.AppData.PreActivityMedia)for(i=0;i<HotSpotApp.AppData.PreActivityMedia.length;i++)HotSpotApp.EmbedMedia("page",HS_appContainer,HotSpotApp.AppData.PreActivityMedia[i]);HotSpotApp.buildPreActivityButtons()},HotSpotApp.buildPreActivityButtons=function(){var t=document.createElement("div");t.id="HS_buttonSet",$(t).hide().appendTo(HS_appContainer).fadeIn(500),t.appendChild(HotSpotApp.startButton)},HotSpotApp.buildPostActivity=function(){if(document.getElementById("HS_header").innerHTML="<h"+HotSpotApp.headingLevel+">"+HotSpotApp.AppData.ActivityName+"</h"+HotSpotApp.headingLevel+">","none"!==HotSpotApp.AppData.PostActivityText&&""!==HotSpotApp.AppData.PostActivityText&&null!==HotSpotApp.AppData.PostActivityText&&void 0!==HotSpotApp.AppData.PostActivityText?(HS_postActivityText=document.createElement("p"),HS_postActivityText.id="HS_postActivityText",HS_postActivityText.innerHTML=HotSpotApp.AppData.PostActivityText,$(HS_postActivityText).hide().appendTo(HS_appContainer).fadeIn(500)):(HS_postActivityText=document.createElement("p"),HS_postActivityText.id="HS_postActivityText",HS_postActivityText.innerHTML="You have completed the activity!",$(HS_postActivityText).hide().appendTo(HS_appContainer).fadeIn(500)),"none"!==HotSpotApp.AppData.PostActivityMedia&&""!==HotSpotApp.AppData.PostActivityMedia&&null!==HotSpotApp.AppData.PostActivityMedia&&void 0!==HotSpotApp.AppData.PostActivityMedia)for(i=0;i<HotSpotApp.AppData.PostActivityMedia.length;i++)HotSpotApp.EmbedMedia("page",HS_appContainer,HotSpotApp.AppData.PostActivityMedia[i]);HotSpotApp.buildPostActivityButtons()},HotSpotApp.buildPostActivityButtons=function(){var t=document.createElement("div");t.id="HS_buttonSet",$(t).hide().appendTo(HS_appContainer).fadeIn(500),t.appendChild(HotSpotApp.restartButton)},HotSpotApp.buildActivity=function(){for(document.getElementById("HS_header").innerHTML="<h"+HotSpotApp.headingLevel+">Activity: "+HotSpotApp.Scenes[HotSpotApp.sceneNum].SceneName+"</h"+HotSpotApp.headingLevel+">",i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots.length;i++)HotSpotApp.allCompleted.splice(i,1,!1),HotSpotApp.correctCheck.splice(i,1,!1);HS_hotSpot=document.createElement("div"),HS_hotSpot.id="HS_hotSpot",HS_appContainer.appendChild(HS_hotSpot);var t=document.createElement("p");t.id="HS_instructions","none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions?(t.innerHTML="Click or tab to each Hot Spot and select it by clicking or hitting the enter key to bring up a pop up activity relevant to the chosen object.<br/>"+HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions,$(t).hide().appendTo(HS_hotSpot).fadeIn()):(t.innerHTML="Click or tab to each Hot Spot and select it by clicking or hitting the enter key to bring up a pop up activity relevant to the chosen object.",$(t).hide().appendTo(HS_hotSpot).fadeIn());var e=document.createElement("p");e.id="HS_scenetracker",HotSpotApp.Scenes.length>1&&(e.innerHTML="<em>You are currently on interactive scene</em> <strong>"+(HotSpotApp.sceneNum+1)+"</strong> <em>of</em> <strong>"+HotSpotApp.AppData.ShowScenes+"</strong",$(e).hide().appendTo(HS_hotSpot).fadeIn(500));var p=document.createElement("img");p.id="HS_imageMap",p.src=HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.src,p.alt=HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.alt,p.setAttribute("usemap","#HS_imageMapAreas"),$(p).hide().appendTo(HS_hotSpot).fadeIn(500),HS_imageMapAreas=document.createElement("map"),HS_imageMapAreas.id="HS_imageMapAreas",HS_imageMapAreas.name="HS_imageMapAreas",$(HS_imageMapAreas).hide().appendTo(HS_hotSpot).fadeIn(500);var o=document.createElement("h"+(HotSpotApp.headingLevel+2));o.id="HS_progress",o.innerHTML="Progress: <span id='HS_completed'></span> / <span id='HS_total'>"+HotSpotApp.allCompleted.length+"</span>",$(o).hide().appendTo(HS_hotSpot).fadeIn(500),HotSpotApp.updateProgress(),HotSpotApp.buildHotspots(),$("#HS_imageMap").mapster(HotSpotApp.normalState),HotSpotApp.fitImage(),HotSpotApp.buildActivityButtons()},HotSpotApp.buildActivityButtons=function(){var t=document.createElement("div");t.id="HS_buttonSetHalf",$(t).hide().appendTo(HS_hotSpot).fadeIn(500),t.appendChild(HotSpotApp.nextButton),document.getElementById("HS_nextButton").disabled=!0,$("#HS_nextButton").hide(),HotSpotApp.sceneNum<HotSpotApp.maxScenes-1?$(".HS_buttonLabel").html("Next Activity"):HotSpotApp.noPost===!1?$(".HS_buttonLabel").html("Finish Activity"):$(".HS_buttonLabel").html("Reset Activity")},HotSpotApp.clearStage=function(){$("#HS_appContainer").empty()},HotSpotApp.buildHotspots=function(){for(i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots.length;i++){var t=[],e="";if("circle"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeType){var p=Math.PI/20,o=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].xPos),n=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].yPos),a=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].radius);for(theta=0;theta<2*Math.PI;theta+=p)x=o+a*Math.cos(theta),y=n-a*Math.sin(theta),t.push(x),t.push(y);e=t.join()}else if("rectangle"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeType){var S=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeWidth),A=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeHeight);x=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].xPos),y=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].yPos);var s=x+S,c=y+A;t.push(x),t.push(y),t.push(s),t.push(y),t.push(s),t.push(c),t.push(x),t.push(c),e=t.join()}else"custom"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeType&&(e=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].coords);var l=document.createElement("area");l.setAttribute("class","HS_areaMap"),l.id=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].id,l.alt="Hot Spot Number "+(i+1)+" Uncompleted. "+HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].desc+" Opens a pop up window.",l.title="Uncompleted activity",l.setAttribute("role","link"),l.setAttribute("aria-selected",!1),l.href="javascript:;",l.coords=e,l.shape="poly",l.onfocus=function(){HotSpotApp.AppData.highlight===!1&&$(this).addClass("highlightable"),this.setAttribute("aria-selected",!0),$(this).mouseover()},l.onblur=function(){HotSpotApp.AppData.highlight===!1&&$(this).removeClass("highlightable"),this.setAttribute("aria-selected",!1),$(this).mouseleave()},l.onclick=function(){HotSpotApp.buildPopUp(this)},l.onmouseleave=function(){HotSpotApp.AppData.highlight===!1&&$(".HS_areaMap").each(function(){$(this).hasClass("highlightable")&&$(this).removeClass("highlightable")}),this.setAttribute("aria-selected",!1)},HotSpotApp.AppData.highlight===!0&&$(l).addClass("highlightable"),HS_imageMapAreas.appendChild(l)}},HotSpotApp.hideHotspots=function(){$(".HS_areaMap").each(function(){this.setAttribute("tabindex","-1")}),document.getElementById("HS_nextButton").setAttribute("tabindex","-1")},HotSpotApp.showHotspots=function(){$(".HS_areaMap").each(function(){this.removeAttribute("tabindex")}),document.getElementById("HS_nextButton").removeAttribute("tabindex")},HotSpotApp.fitImage=function(){var t=$("#HS_hotSpot").width();t>HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.imgWidth&&(t=HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.imgWidth,$("#HS_hotSpot").css("width",t)),$("#HS_imageMap").mapster("resize",t,0,0),HotSpotApp.activeActivity===!0&&$(".HS_MediaEmbeddedVideo").each(function(){this.setAttribute("height",.5625*$(HS_questionContainer).width())})},HotSpotApp.buildPopUp=function(t){HotSpotApp.hideHotspots();var e,p,o,n=t.id;if(HotSpotApp.activeActivity===!1){HotSpotApp.activeActivity=!0;var a=t.coords.split(",");x=a[0],y=a[1];var S,A=$("#HS_imageMap").width()/2,s=$("#HS_instructions").outerHeight(),c=$("#HS_instructions").outerHeight(!0),l=$("#HS_progress").outerHeight(),r=$("#HS_progress").outerHeight(!0),d=$("#HS_hotSpot").width();for(c=(c-s)/2,s+=c,r=(r-l)/2,l+=r,S=(d-2*A)/2,HS_questionContainer=document.createElement("div"),HS_questionContainer.id="HS_questionContainer",$(HS_questionContainer).hide().appendTo("#HS_content").fadeIn(300),i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent.length;i++)HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].key===n&&(e=null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].popUpName?HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].popUpName:"Pop Up Activity");var H=document.createElement("div");H.id="HS_popUpButtonSet",HS_questionContainer.appendChild(H);var u=document.createElement("button");u.id="HS_closeButton",u.alt="Close the pop up window",u.setAttribute("title","Closes the Pop Up Without Finishing"),u.onclick=function(){$("#HS_questionContainer").remove(),HotSpotApp.activeActivity=!1,HotSpotApp.showHotspots()},H.appendChild(u),HS_question=document.createElement("div"),HS_question.id="HS_question",HS_questionContainer.appendChild(HS_question);var h=document.createElement("h"+(HotSpotApp.headingLevel+1));h.id="HS_popUpHeader",h.innerHTML=e,HS_question.appendChild(h);var m=document.createElement("div");m.id="HS_bottomButtonSet",HS_questionContainer.appendChild(m);var g=document.createElement("button");g.id="HS_finishButton",g.setAttribute("class","HS_popUpButton"),g.setAttribute("title","Finishes and Closes the Pop Up Window"),g.onclick=function(){for($("#HS_questionContainer").fadeOut(300,function(){$("#HS_questionContainer").remove()}),HotSpotApp.showHotspots(),i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent.length;i++)HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].key===n&&("assessment"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].activityType?HotSpotApp.correctCheck[i]===!0?HotSpotApp.allCompleted[i]===!0?($("#"+n).mapster("set",!1,HotSpotApp.wrongState),$("#"+n).mapster("set",!1,HotSpotApp.correctState),$("#"+n).mapster("set",!0,HotSpotApp.correctState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(i,1,!0)):($("#"+n).mapster("set",!0,HotSpotApp.correctState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(i,1,!0)):HotSpotApp.allCompleted[i]===!0?($("#"+n).mapster("set",!1,HotSpotApp.wrongState),$("#"+n).mapster("set",!1,HotSpotApp.correctState),$("#"+n).mapster("set",!0,HotSpotApp.wrongState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(i,1,!0)):($("#"+n).mapster("set",!0,HotSpotApp.wrongState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(i,1,!0)):($("#"+n).mapster("set",!0,HotSpotApp.correctState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(i,1,!0)));HotSpotApp.updateProgress();var t=document.getElementById(n).alt,e=t.replace("Uncompleted.","Completed.");document.getElementById(n).alt=e,document.getElementById(n).title="Completed activity."};var v=document.createElement("span");for(v.setAttribute("class","HS_buttonLabel"),v.innerHTML="Continue",g.appendChild(v),m.appendChild(g),i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent.length;i++)if(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].key===n)if("presentation"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].activityType){if("none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia)for(j=0;j<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia.length;j++)HotSpotApp.EmbedMedia("window",HS_question,HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia[j])}else if("assessment"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].activityType){p=i,document.getElementById("HS_finishButton").disabled=!0,$("#HS_finishButton").hide();var b=document.createElement("p");b.id="HS_quizText",b.innerHTML=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].questionText,HS_question.appendChild(b);var C=document.createElement("fieldset");for(C.id="HS_fieldSet",C.innerHTML="<legend>Answers:</legend>",HS_question.appendChild(C),j=0;j<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].answers.length;j++){HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].answers[j].correct===!0&&(o=j);var _=document.createElement("div");_.setAttribute("class","HS_answer"),$(_).click(function(){$(this.firstChild).prop("checked",!0)});var f=document.createElement("input");f.setAttribute("class","HS_input"),f.setAttribute("type","radio"),f.setAttribute("name","qu"),f.setAttribute("value",j),f.id="qu"+j;var M=document.createElement("label");M.setAttribute("for","qu"+j),M.setAttribute("class","HS_label"),M.innerHTML=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].answers[j].answerText,_.appendChild(f),_.appendChild(M),C.appendChild(_)}var D=document.createElement("button");D.id="HS_submitButton",D.setAttribute("class","HS_popUpButton"),D.setAttribute("title","Submits your answer"),D.href="#",D.onclick=function(){HotSpotApp.EvaluateScore(p,o)};var k=document.createElement("span");k.setAttribute("class","HS_buttonLabel"),k.innerHTML="Submit Answer",D.appendChild(k),$(D).prependTo(m)}}$(HS_questionContainer).css({top:$("#HS_imageMap").offset().top+"px"}),HotSpotApp.fitImage(),$("#HS_closeButton").focus()},HotSpotApp.EvaluateScore=function(t,e){var p=parseInt($("input[name=qu]:checked").val()),o=document.getElementById("qu"+p).parentNode,i='<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOUFFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5OEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5OUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PllHhcQAAACASURBVHjaYmIgB2zx7wBjIGAhSzMDQzmUzcBEtmYI4GeiQPMMIM5iokQzg8/G/0xQBYzkaAZxmKCap8FClRTNEANAmhkYMsAKkQ0hQjMsGj8i8UGGINgENIMAIw7bGIjRDPMCA1CyAkh2kqoZYQB2QwhqRngBM+T5idEMAgABBgBezD9OGUJHCwAAAABJRU5ErkJggg==" alt="right check mark" disabled/>',n='<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMThFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5Q0VBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxNkVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuBTV64AAAC/SURBVHjahJPRDcIwDETtCLEAjARSv/iL0hXoQGUFoi5QCUaCBfgJDnJQmubSSlak691zaqscQqA3n/dENEnNR3reCDwvOl3l6KTsITw+UTP6LoYvUqOaUHhU35T0BJgz7wqShan0/wB67aEGqYSH/DM5zoCZUScv5WrhmFsBAKTaGQIUci86ewn3uScBDJi2K2SHtmM2pu1b21kAwLR7tJ0FoLWq1orzG3Ro2gDy9+/0tFv/QtSlcwrbpH8FGAC2umDxE/BZxwAAAABJRU5ErkJggg==" alt="wrong x" disabled/>';if(document.getElementById("HS_submitButton").disabled=!0,document.getElementById("HS_finishButton").disabled=!1,$("#HS_finishButton").fadeIn(500),$("#HS_submitButton").fadeOut(250),$(o).addClass("HS_userSelected"),HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].feedback===!0&&"none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback){var a=document.createElement("div");a.id="HS_feedback",$(a).addClass("bg-light"),a.innerHTML='<p class="HS_feedbackText"><strong class="HS_feedbackTitle">Feedback:  </strong><br>'+HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback+"</p>",$(a).hide().appendTo(HS_question).slideDown(500)}p===e?HotSpotApp.correctCheck[t]=!0:HotSpotApp.correctCheck[t]=!1,$(".HS_answer").each(function(t){t===e?$(i).hide().appendTo(this).fadeIn(500):$(n).hide().appendTo(this).fadeIn(500)})},HotSpotApp.EmbedMedia=function(t,e,p){var o,i,n=document.createElement("div");switch(n.setAttribute("class","HS_Media"),p.type){case"link":i=document.createElement("a"),i.setAttribute("class","HS_MediaLink"),i.setAttribute("href",p.src),i.setAttribute("target","_blank"),p.description?i.innerHTML=p.description:i.innerHTML="Link",n.appendChild(i);break;case"audio":i=document.createElement("audio"),i.id=p.id,i.setAttribute("class","HS_MediaAudio"),i.setAttribute("target","_blank"),i.innerHTML='<source src="'+p.mp3+'" type="audio/mpeg"><source src="'+p.ogg+'" type="audio/ogg"><source src="'+p.wav+'" type="audio/wav"> Your browser does not support the audio tag.',n.appendChild(i);var a=document.createElement("button");a.setAttribute("class","HS_audioButton"),a.setAttribute("title","Play Audio Button"),a.onclick=function(){var t=document.getElementById(p.id);t.play()},n.appendChild(a);break;case"image":"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink&&(o=document.createElement("a"),o.setAttribute("class","HS_MediaImage"),o.setAttribute("href",p.mediaLink),o.setAttribute("target","_blank")),i=document.createElement("img"),"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink||i.setAttribute("class","HS_MediaImage"),i.setAttribute("src",p.src),"window"===t?i.setAttribute("width","100%"):("none"!==p.width&&null!==p.width&&void 0!==p.width&&""!==p.width?i.setAttribute("width",p.width):i.setAttribute("width","420"),"none"!==p.height&&null!==p.height&&void 0!==p.height&&""!==p.height?i.setAttribute("height",p.height):i.setAttribute("height","315")),n.setAttribute("style","text-align:center;"),p.description&&i.setAttribute("alt",p.description),"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink?n.appendChild(i):(o.appendChild(i),n.appendChild(o));break;case"YouTubeVideo":validSrc=HotSpotApp.validateYouTubeLink(p.src),validSrc&&(i=document.createElement("iframe"),i.setAttribute("class","HS_MediaEmbeddedVideo"),"window"===t?(i.setAttribute("width","100%"),i.setAttribute("height",.5625*$(HS_questionContainer).width())):("none"!==p.width&&null!==p.width&&void 0!==p.width&&""!==p.width?i.setAttribute("width",p.width):i.setAttribute("width","420"),"none"!==p.height&&null!==p.height&&void 0!==p.height&&""!==p.height?i.setAttribute("height",p.height):i.setAttribute("height","315")),i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.setAttribute("style","padding-bottom: 10px 0px;"),i.setAttribute("src",validSrc),n.setAttribute("style","text-align:center;"),p.description&&i.setAttribute("alt",p.description),n.appendChild(i),o=document.createElement("a"),o.setAttribute("class","HS_MediaAltLink"),o.setAttribute("href",p.altLink),o.setAttribute("target","_blank"),o.innerHTML="Alternate Link.",n.appendChild(o));break;case"text":i=document.createElement("p"),i.setAttribute("class","HS_MediaText"),i.setAttribute("target","_blank"),i.innerHTML=p.content,n.appendChild(i)}$(n).hide().appendTo(e).fadeIn(500)},HotSpotApp.validateYouTubeLink=function(t){return-1!==t.indexOf("www.youtube.com")?-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")?(code=t.slice(t.indexOf("?v=")+3),"https://www.youtube.com/embed/"+code):!1:-1!==t.indexOf("https://www.youtube.com/embed/")?link.slice(link.indexOf("src")+5,link.indexOf('"',link.indexOf("src")+5)):!1:!1},HotSpotApp.updateProgress=function(){var t=0;for(i=0;i<HotSpotApp.allCompleted.length;i++)HotSpotApp.allCompleted[i]===!0&&t++;t===HotSpotApp.allCompleted.length&&(document.getElementById("HS_nextButton").disabled=!1,$("#HS_nextButton").fadeIn(500)),document.getElementById("HS_completed").innerHTML=t},HotSpotApp.shuffle=function(t){for(var e,p,o=t.length;o;)p=Math.floor(Math.random()*o--),e=t[o],t[o]=t[p],t[p]=e;return t},HotSpotApp.onComplete=function(){};