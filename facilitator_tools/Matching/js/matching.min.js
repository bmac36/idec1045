function d2log(t){"undefined"!=typeof D2LDEBUG&&D2LDEBUG&&console.log(t)}var MatchingApp={mobileDevice:!1,ActivityType:null,AppData:null,currentAttempts:0,sessionTimer:0,timerInterval:null,ti:1,containerRef:null,hLightingEffect:!1,qCols:1,curQCol:1,accMATCont:"div",questionData:null,AnsSlotData:null,alreadySelected:!1,heightSet:!1,finishedQuiz:!1,allAnswered:!1,interval:null,headingLevel:null,continueButton:null,checkAnswersButton:null,resetWrongButton:null,resetButton:null,restartButton:null,submitButton:null,postQuizButton:null,instructionButton:null,droppedItem:null,notifications:!0,origPos:[],aMatch:[],qMatch:[],matchAmount:[],selectedElements:[],scoreEval:[],savedElements:[],savedAnswers:[],savedCorrectAnswers:[],savedBackgrounds:[],savedBackgroundColors:[]},D2LDEBUG=!0,MAT_appContainer,MAT_buttonIcon,MAT_postQuizText,slotBackground,temp,tempPar,tempComp,ans,ansId,data,code,questionFile,idNum,tempArr,ti,validSrc,c,i,j,k;MatchingApp.resetQuizData=function(){MatchingApp.sessionTimer=0,MatchingApp.alreadySelected=!1,MatchingApp.heightSet=!1,MatchingApp.finishedQuiz=!1,MatchingApp.allAnswered=!1,MatchingApp.interval=null,MatchingApp.origPos=[],MatchingApp.aMatch=[],MatchingApp.qMatch=[],MatchingApp.matchAmount=[],MatchingApp.selectedElements=[],MatchingApp.scoreEval=[],MatchingApp.savedElements=[],MatchingApp.savedAnswers=[],MatchingApp.savedCorrectAnswers=[]},MatchingApp.setupApp=function(t,e){questionFile=t,null!==document.getElementById(e)?(MatchingApp.containerRef=document.getElementById(e),MatchingApp.getAppData(MatchingApp.buildApp)):d2log("ERROR: Missing specified DOM object in MatchingApp.setupApp().")},MatchingApp.getAppData=function(t){var e=$.getJSON(questionFile,function(e){MatchingApp.AppData=e,t(MatchingApp.AppData)});e.fail(function(t){d2log("ERROR: Failed to load data from specified file. Ensure that the file path is correct and that JSON the JSON data is valid. (Use a validator like: http://jsonformatter.curiousconcept.com/ )"),d2log(t)})},MatchingApp.buildApp=function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(MatchingApp.mobileDevice=!0),MatchingApp.questionData=MatchingApp.AppData.QuestionNodes,MatchingApp.AnsSlotData=MatchingApp.AppData.AnswerNodes,MatchingApp.ActivityType=MatchingApp.AppData.ActivityType,null!==MatchingApp.AppData.DefaultColor&&void 0!==MatchingApp.AppData.DefaultColor&&""!==MatchingApp.AppData.DefaultColor&&"none"!==MatchingApp.AppData.DefaultColor||(MatchingApp.AppData.DefaultColor="#FFFFFF"),null!==MatchingApp.AppData.DefaultSelectColor&&void 0!==MatchingApp.AppData.DefaultSelectColor&&""!==MatchingApp.AppData.DefaultSelectColor&&"none"!==MatchingApp.AppData.DefaultSelectColor||(MatchingApp.AppData.DefaultSelectColor="#B7E5E5"),null!==MatchingApp.AppData.DefaultHighlightColor&&void 0!==MatchingApp.AppData.DefaultHighlightColor&&""!==MatchingApp.AppData.DefaultHighlightColor&&"none"!==MatchingApp.AppData.DefaultHighlightColor||(MatchingApp.AppData.DefaultHighlightColor="#C6C8CA"),MatchingApp.AppData.DefaultColor="#FFFFFF",MatchingApp.qCols=parseInt(MatchingApp.AppData.QuestionColumns),MatchingApp.qCols>MatchingApp.questionData.length&&(MatchingApp.qCols=MatchingApp.questionData.length),MatchingApp.hLightingEffect=!0,MatchingApp.headingLevel=parseInt(MatchingApp.AppData.HeadingLevel),null===MatchingApp.headingLevel||void 0===MatchingApp.headingLevel||"none"===MatchingApp.headingLevel||isNaN(MatchingApp.headingLevel)||""===MatchingApp.headingLevel?MatchingApp.headingLevel=1:MatchingApp.headingLevel>3&&(MatchingApp.headingLevel=3),MatchingApp.buildAppFrame(),MatchingApp.loadButtons(),!("none"!==MatchingApp.AppData.PreActivityText&&null!==MatchingApp.AppData.PreActivityText&&void 0!==MatchingApp.AppData.PreActivityText&&""!==MatchingApp.AppData.PreActivityText||"none"!==MatchingApp.AppData.PreActivityMedia&&null!==MatchingApp.AppData.PreActivityMedia&&void 0!==MatchingApp.AppData.PreActivityMedia&&""!==MatchingApp.AppData.PreActivityMedia)?MatchingApp.buildActivity():MatchingApp.buildPreQuiz(),"none"!==MatchingApp.AppData.PostActivityText&&null!==MatchingApp.AppData.PostActivityText&&void 0!==MatchingApp.AppData.PostActivityText&&""!==MatchingApp.AppData.PostActivityText&&"none"!==MatchingApp.AppData.PostActivityMedia&&null!==MatchingApp.AppData.PostActivityMedia&&void 0!==MatchingApp.AppData.PostActivityMedia&&""!==MatchingApp.AppData.PostActivityMedia&&MatchingApp.IncludePostPage!==!0&&(MatchingApp.IncludePostPage=!1),$(MatchingApp.containerRef).addClass("rs_preserve");try{PNotify.removeAll()}catch(t){MatchingApp.notifications=!1}},MatchingApp.autoSelect=function(t){var e=navigator.appName;if("Microsoft Internet Explorer"===e){document.selection.empty();var a=document.body.createTextRange();a.moveToElementText(t),a.select()}},MatchingApp.buildAppFrame=function(){var t=document.createElement("section");t.id="MAT_container";var e=document.createElement("section");e.id="MAT_content";var a=document.createElement("section");a.id="MAT_header",$(a).addClass("bg-dark"),a.innerHTML="<h"+MatchingApp.headingLevel+">"+MatchingApp.AppData.ActivityName+"</h"+MatchingApp.headingLevel+">",t.appendChild(e),$(t).appendTo(MatchingApp.containerRef),$("<div/>",{id:"AccMessageDisp","class":"AccMessage",text:"Stuff"}).appendTo("body"),MAT_appContainer=document.createElement("div"),MAT_appContainer.id="MAT_appContainer",MAT_appContainer.setAttribute("role","main"),$(a).hide().appendTo(e).slideDown(500,"swing"),e.appendChild(MAT_appContainer)},MatchingApp.loadButtons=function(){MAT_buttonIcon=document.createElement("div"),MAT_buttonIcon.setAttribute("class","MAT_buttonIcon");var t=document.createElement("button");t.id="MAT_checkButton",t.setAttribute("class","MAT_button"),t.setAttribute("title","Checks the Answers"),t.onclick=function(){MatchingApp.checkAnswers()};var e=document.createElement("span");e.setAttribute("class","MAT_buttonLabel"),e.innerHTML="Check Answers",t.appendChild(e),MatchingApp.checkAnswersButton=t,MAT_buttonIcon=document.createElement("div"),MAT_buttonIcon.setAttribute("class","MAT_buttonIcon");var a=document.createElement("button");a.id="MAT_resetWrongButton",a.setAttribute("class","MAT_button"),a.setAttribute("title","Resets the Wrong Draggable Items"),a.onclick=function(){MatchingApp.resetWrong()};var i=document.createElement("span");i.setAttribute("class","MAT_buttonLabel"),i.innerHTML="Reset Wrong",a.appendChild(i),a.disabled=!0,MatchingApp.resetWrongButton=a,MAT_buttonIcon=document.createElement("div"),MAT_buttonIcon.setAttribute("class","MAT_buttonIcon");var n=document.createElement("button");n.id="MAT_resetButton",n.setAttribute("class","MAT_button"),n.setAttribute("title","Resets All the Draggable Items"),n.onclick=function(){MatchingApp.reset()};var p=document.createElement("span");p.setAttribute("class","MAT_buttonLabel"),p.innerHTML="Reset All",n.appendChild(p),MatchingApp.resetButton=n,MAT_buttonIcon=document.createElement("div"),MAT_buttonIcon.setAttribute("class","MAT_buttonIcon");var c=document.createElement("button");c.id="MAT_restartButton",c.setAttribute("class","MAT_button"),c.setAttribute("title","Restarts the Activity"),c.onclick=function(){MatchingApp.clearStage(),MatchingApp.resetQuizData(),!("none"!==MatchingApp.AppData.PreActivityText&&null!==MatchingApp.AppData.PreActivityText&&void 0!==MatchingApp.AppData.PreActivityText&&""!==MatchingApp.AppData.PreActivityText||"none"!==MatchingApp.AppData.PreActivityMedia&&null!==MatchingApp.AppData.PreActivityMedia&&void 0!==MatchingApp.AppData.PreActivityMedia&&""!==MatchingApp.AppData.PreActivityMedia)?MatchingApp.buildActivity():MatchingApp.buildPreQuiz()};var o=document.createElement("span");o.setAttribute("class","MAT_buttonLabel"),o.innerHTML="Reset Activity",c.appendChild(o),MatchingApp.restartButton=c;var s=document.createElement("button");s.id="MAT_continueButton",s.setAttribute("class","MAT_button"),s.onclick=function(){MatchingApp.clearStage(),MatchingApp.buildActivity(),MatchingApp.timerInterval=setInterval(MatchingApp.timer,1e3)};var r=document.createElement("span");r.setAttribute("class","MAT_buttonLabel"),s.setAttribute("title","Starts the Activity"),r.innerHTML="Start Now",s.appendChild(r),MatchingApp.continueButton=s,MAT_buttonIcon=document.createElement("div"),MAT_buttonIcon.setAttribute("class","MAT_buttonIcon");var A=document.createElement("button");A.id="MAT_postQuizButton",A.setAttribute("class","MAT_button"),A.setAttribute("title","Finishes the Activity"),A.onclick=function(){MatchingApp.clearStage(),MatchingApp.buildPostQuiz()};var h=document.createElement("span");h.setAttribute("class","MAT_buttonLabel"),h.innerHTML="Move On",A.appendChild(h),MatchingApp.postQuizButton=A,MAT_buttonIcon=document.createElement("div"),MAT_buttonIcon.setAttribute("class","MAT_buttonIcon"),MAT_buttonIcon.setAttribute("style","margin:0px auto;")},MatchingApp.buildPreQuiz=function(){if(MatchingApp.ti=1,"none"!==MatchingApp.AppData.PreActivityText&&null!==MatchingApp.AppData.PreActivityText&&void 0!==MatchingApp.AppData.PreActivityText&&""!==MatchingApp.AppData.PreActivityText){var t=document.createElement("p");t.id="MAT_preQuizText",t.innerHTML=MatchingApp.AppData.PreActivityText,$(t).hide().appendTo(MAT_appContainer).fadeIn(500)}if("none"!==MatchingApp.AppData.PreActivityMedia&&null!==MatchingApp.AppData.PreActivityMedia&&void 0!==MatchingApp.AppData.PreActivityMedia&&""!==MatchingApp.AppData.PreActivityMedia)for(i=0;i<MatchingApp.AppData.PreActivityMedia.length;i++)MatchingApp.EmbedMedia(MAT_appContainer,MatchingApp.AppData.PreActivityMedia[i]);MatchingApp.buildPreQuizButtons(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},MatchingApp.buildPreQuizButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",$(t).hide().appendTo(MAT_appContainer).fadeIn(500),t.appendChild(MatchingApp.continueButton),MatchingApp.continueButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++},MatchingApp.buildPostQuiz=function(){if(MatchingApp.ti=1,"none"!==MatchingApp.AppData.PostActivityText&&null!==MatchingApp.AppData.PostActivityText&&void 0!==MatchingApp.AppData.PostActivityText&&""!==MatchingApp.AppData.PostActivityText?(MAT_postQuizText=document.createElement("p"),MAT_postQuizText.id="MAT_postQuizText",MAT_postQuizText.innerHTML=MatchingApp.AppData.PostActivityText,$(MAT_postQuizText).hide().appendTo(MAT_appContainer).fadeIn(500)):(MAT_postQuizText=document.createElement("p"),MAT_postQuizText.id="HS_postActivityText",MAT_postQuizText.innerHTML="You have completed the activity!",$(MAT_postQuizText).hide().appendTo(MAT_appContainer).fadeIn(500)),"none"!==MatchingApp.AppData.PostActivityMedia&&null!==MatchingApp.AppData.PostActivityMedia&&void 0!==MatchingApp.AppData.PostActivityMedia&&""!==MatchingApp.AppData.PostActivityMedia)for(i=0;i<MatchingApp.AppData.PostActivityMedia.length;i++)MatchingApp.EmbedMedia(MAT_appContainer,MatchingApp.AppData.PostActivityMedia[i]);MatchingApp.buildPostQuizButtons(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},MatchingApp.buildPostQuizButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",MAT_appContainer.appendChild(t),t.appendChild(MatchingApp.restartButton),MatchingApp.restartButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++},MatchingApp.buildActivity=function(){for(MatchingApp.ti=1,i=0;i<MatchingApp.questionData.length;i++)MatchingApp.origPos.push(null),temp=MatchingApp.questionData[i].answer,MatchingApp.qMatch.push(temp);for(j=0;j<MatchingApp.AnsSlotData.length;j++){temp=MatchingApp.AnsSlotData[j].key,MatchingApp.aMatch.push(temp);var t=0;for(k=0;k<MatchingApp.questionData.length;k++)MatchingApp.questionData[k].answer===MatchingApp.AnsSlotData[j].key&&t++;MatchingApp.matchAmount.push(t)}MatchingApp.buildInstructions(),MatchingApp.buildQuestionCols(),MatchingApp.buildAnswerSlots(),MatchingApp.buildActivityButtons(),MatchingApp.initAccMAT(),MatchingApp.assignOrigPos(),"report"===MatchingApp.AppData.FeedbackType&&(document.getElementById("MAT_checkButton").disabled=!0,$("#MAT_checkButton").hide()),$("#MAT_instructions").attr("tabindex",MatchingApp.ti),$("[tabindex=1]").focus(),MatchingApp.mobileDevice===!1&&(MatchingApp.checkCollapse=setInterval("MatchingApp.checkForCollapse();",100)),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},MatchingApp.buildActivityButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",$(t).hide().appendTo(MAT_appContainer).fadeIn(500),t.appendChild(MatchingApp.checkAnswersButton),MatchingApp.checkAnswersButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++,"continuous"===MatchingApp.AppData.FeedbackType?(t.appendChild(MatchingApp.resetWrongButton),$("#MAT_resetWrongButton").hide(),MatchingApp.resetWrongButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++):(t.appendChild(MatchingApp.resetButton),MatchingApp.resetButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++)},MatchingApp.buildReport=function(){MatchingApp.ti=1,MatchingApp.findCorrectAnswers();var t='<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOTZFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5NEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5NUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqYsgfwAAAFBSURBVHjaYvz//z8DLQETw5ADW/w7wBgKGKluOANDOZTXyeCzsYKRioY3AMl6NNEGZioZXgEkm7HIPGOkkuHtWGSWAXEcI4WGZwLJaVhkNgNxCDAOfjHS0nDyU9EW/0QgOQ+LzG4g9oEZTp4FW/yjgeQiLJl0P9Twb8iCjGgagUo2LqWW4QgLtvj7Ack1UDFQ+G3CYjhMDSuazCkgdgPq+YjNTYxYNP7GsIRMw2GFXS2aRlawYVv83aCGu+Ew/BIhw2E+EAXS+4BYB03uOxA3AXEdEHOiyV0BYieg4a8JpQlYHOCyBBsg2nD0VCQDJA8AsTIe9XeB2B5o+FPSKxyfjU+ApAPUEFyGO5BiOPaMBvHJCSCWRhIFWW4JdQSFVSbCJzCXgmhHcgzHXSf7bLwDteQkNFjukFsmMg75VgVAgAEAWmBzHcug4yIAAAAASUVORK5CYII=" alt="right check mark" disabled/>',e='<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMUNFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQjlENkQxOUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxQUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr+MFuwAAADiSURBVHjaxJY9DsIwDIXtHoCJkY1DdO2AWHuPHqj36IoYujJwBDZGJk7AM3KWoEa2JQtLr6na5Hup81cijRedeugOHSgY0lYZfXnGBY7iAu2gBzTs6fr0wlGs0BF6Q2cwblzBS7hMKniJr0mHy1zBSSuulnRtwEmZsxiM2mPymjTgJQsjGyv+pMvahr0NvHXZ2yu9N38tB/JKnlRyYPDICt80cJo01wwH57h5QXaUHP9JUeogp07T1IWWulWkbnYRuMdE1sESgUvou6FxnixiMOnx5oIbTIQ5pR/6lP3b8hFgAJ82ro/bie6BAAAAAElFTkSuQmCC" alt="wrong x" disabled/>',a=MatchingApp.calculateScore(),i=document.createElement("div");i.id="MAT_report";var n=document.createElement("h"+(MatchingApp.headingLevel+1));n.setAttribute("class","MAT_resultsHeader"),n.innerHTML="Results:",i.appendChild(n);var p=document.createElement("h"+(MatchingApp.headingLevel+2));p.setAttribute("class","MAT_scoreHeader");for(var c=0,o=0;o<MatchingApp.matchAmount.length;o++)c+=MatchingApp.matchAmount[o];for(p.innerHTML="You scored "+a+"/"+c+"!",i.appendChild(p),o=0;o<MatchingApp.AnsSlotData.length;o++)if(MatchingApp.matchAmount[o]>0){var s=document.createElement("div");s.setAttribute("class","MAT_miniReport");var r=document.createElement("h"+(MatchingApp.headingLevel+3));r.setAttribute("class","MAT_dropzoneHeader"),r.innerHTML=MatchingApp.AnsSlotData[o].title,s.appendChild(r),i.appendChild(s);var A=document.createElement("ul");for(A.setAttribute("class","MAT_miniReportContent"),s.appendChild(A),j=0;j<MatchingApp.savedElements.length;j++)if(MatchingApp.AnsSlotData[o].key===MatchingApp.savedAnswers[j]){var h=document.createElement("li"),d=document.createElement("div");switch($(d).addClass("bg-light MAT_feedback"),MatchingApp.scoreEval[j]){case 1:h.innerHTML=MatchingApp.savedElements[j],A.appendChild(h),$(h).append(t),"none"!==MatchingApp.questionData[j].correct&&null!==MatchingApp.questionData[j].correct&&void 0!==MatchingApp.questionData[j].correct&&""!==MatchingApp.questionData[j].correct&&(d.innerHTML="Feedback: "+MatchingApp.questionData[j].correct,A.appendChild(d));break;default:h.innerHTML=MatchingApp.savedElements[j]+" (Correct Answer: "+MatchingApp.savedCorrectAnswers[j]+")",A.appendChild(h),$(h).append(e),"none"!==MatchingApp.questionData[j].wrong&&null!==MatchingApp.questionData[j].wrong&&void 0!==MatchingApp.questionData[j].wrong&&""!==MatchingApp.questionData[j].wrong&&(d.innerHTML="Feedback: "+MatchingApp.questionData[j].wrong,A.appendChild(d))}}}$(i).hide().appendTo(MAT_appContainer).fadeIn(500),$(".MAT_expand").remove(),MatchingApp.buildReportButtons(),$("MAT_header").focus(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},MatchingApp.buildReportButtons=function(){var t=document.createElement("div");t.id="MAT_buttonSet",MAT_appContainer.appendChild(t),MatchingApp.AppData.IncludePostPage===!0&&t.appendChild(MatchingApp.postQuizButton),MatchingApp.postQuizButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++,t.appendChild(MatchingApp.restartButton),MatchingApp.restartButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++},MatchingApp.clearStage=function(){$("#MAT_appContainer").empty(),clearInterval(MatchingApp.interval)},MatchingApp.findCorrectAnswers=function(){for(i=0;i<MatchingApp.questionData.length;i++)for(j=0;j<MatchingApp.AnsSlotData.length;j++)MatchingApp.questionData[i].answer===MatchingApp.AnsSlotData[j].key&&MatchingApp.savedCorrectAnswers.push(MatchingApp.AnsSlotData[j].title)},MatchingApp.toggleInstructions=function(){},MatchingApp.buildQuestionCols=function(){var t=document.createElement("div");for(t.id="MAT_qColContainer",t.className="MAT_questions",t.setAttribute("ondrop","MatchingApp.revert(event);"),t.setAttribute("ondragover","MatchingApp.allowRevert(event);"),MatchingApp.AppData.HorizontalAlignment===!0&&($(t).css("width","48%"),$(t).css("float","left"),$(t).css("display","block")),$(t).hide().appendTo(MAT_appContainer).fadeIn(500),c=0;c<MatchingApp.qCols;c++){var e=$("<div/>",{id:"qColum_"+(c+1),style:"width: "+100/MatchingApp.qCols+"%;","class":"MI_qColum"});$("<div/>",{id:"unsorted_"+(c+1),"class":"MAT_qCol"}).appendTo(e),$("#MAT_qColContainer").append(e)}for(tempArr=[],i=0;i<MatchingApp.questionData.length;i++)"text"===MatchingApp.questionData[i].type&&(MatchingApp.mobileDevice===!0?tempArr[i]='<div id="drag'+i+'" ontouchmove="MatchingApp.touchDrag(event);" class="draggableTextNode" >'+MatchingApp.questionData[i].question+"</div>":tempArr[i]='<div id="drag'+i+'" draggable="true" aria-hidden="false" aria-grabbed="false" ondragstart="MatchingApp.drag(event);" ondrop="MatchingApp.drop(event);" onmousedown="MatchingApp.autoSelect(this);" onmouseover="MatchingApp.hLightEffect(this, true)" onmouseout="MatchingApp.hLightEffect(this, false)" onfocus="MatchingApp.hLightEffect(this, true)" onblur="MatchingApp.hLightEffect(this, false)" class="draggableTextNode" >'+MatchingApp.questionData[i].question+"</div>"),"image"===MatchingApp.questionData[i].type&&(MatchingApp.mobileDevice===!0?tempArr[i]='<div id="drag'+i+'" ontouchmove="MatchingApp.touchDrag(event);" class="draggableTextNode" ><img class="draggableImage" src="'+MatchingApp.questionData[i].src+'" alt="'+MatchingApp.questionData[i].alt+'"/></div>':tempArr[i]='<div id="drag'+i+'" draggable="true" aria-hidden="false" aria-grabbed="false" ondragstart="MatchingApp.drag(event);" ondrop="MatchingApp.drop(event);" onmousedown="MatchingApp.autoSelect(this);" onmouseover="MatchingApp.hLightEffect(this, true)" onmouseout="MatchingApp.hLightEffect(this, false)" onfocus="MatchingApp.hLightEffect(this, true)" onblur="MatchingApp.hLightEffect(this, false)" class="draggableTextNode" > <img class="draggableImage" src="'+MatchingApp.questionData[i].src+'" alt="'+MatchingApp.questionData[i].alt+'"/></div>'),null!==MatchingApp.questionData[i].color&&void 0!==MatchingApp.questionData[i].color&&"none"!==MatchingApp.questionData[i].color&&""!==MatchingApp.questionData[i].color&&"default"===MatchingApp.questionData[i].color?(slotBackground=MatchingApp.AppData.DefaultColor,MatchingApp.savedBackgroundColors.splice(i,1,slotBackground)):(slotBackground=MatchingApp.AppData.DefaultColor,MatchingApp.savedBackgroundColors.splice(i,1,slotBackground));for(MatchingApp.AppData.Randomize===!0&&tempArr.sort(function(){return.5-Math.random()}),j=0;j<MatchingApp.questionData.length;j++)MatchingApp.curQCol>MatchingApp.qCols&&(MatchingApp.curQCol=1),$("#unsorted_"+MatchingApp.curQCol).append(tempArr[j]),MatchingApp.curQCol++;$(".draggableTextNode").each(function(){this.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++,idNum=parseInt(this.id.substr(4))}),MatchingApp.curQCol=1},MatchingApp.buildAnswerSlots=function(){var t=document.createElement("div");for(t.id="MAT_ansSlotContainer",t.className="MAT_answers",MatchingApp.AppData.HorizontalAlignment===!0&&($(t).css("width","50%"),$(t).css("float","right"),$(t).css("display","block")),$(t).hide().appendTo(MAT_appContainer).fadeIn(500),c=0;c<MatchingApp.AnsSlotData.length;c++)if(MatchingApp.matchAmount[c]>0){var e,a;e=("default"===MatchingApp.AnsSlotData[c].color,"#1c5295"),"none"!==MatchingApp.AnsSlotData[c].src&&null!==MatchingApp.AnsSlotData[c].src&&void 0!==MatchingApp.AnsSlotData[c].src&&""!==MatchingApp.AnsSlotData[c].src?(slotBackground=MatchingApp.AnsSlotData[c].src,MatchingApp.savedBackgrounds[c]=slotBackground,a="border: "+e+" 1px solid; border-top: none; background: url("+slotBackground+") repeat;"):(MatchingApp.savedBackgrounds[c]="none",a="border: "+e+" 1px solid;border-top: none; ");var i=$("<div/>",{id:"aSlotCont_"+c,"class":"MI_aSlot",ondrop:"MatchingApp.drop(event)",ondragover:"MatchingApp.allowDrop(event)"}),n=$("<div/>",{id:MatchingApp.AnsSlotData[c].key+"_title","class":"dzTitle bg-dark"}).appendTo(i);"sort"===MatchingApp.ActivityType?$("<h"+(MatchingApp.headingLevel+1)+"/>").html(MatchingApp.AnsSlotData[c].title+" ("+MatchingApp.matchAmount[c]+")").appendTo(n):$("<h"+(MatchingApp.headingLevel+1)+"/>").html(MatchingApp.AnsSlotData[c].title).appendTo(n),$("<div/>",{id:MatchingApp.AnsSlotData[c].key,"class":"connect_box dropzone",title:MatchingApp.AnsSlotData[c].title+" dropzone",style:a}).appendTo(i),$("#MAT_ansSlotContainer").append(i),MatchingApp.mobileDevice===!0&&$(".dropzone").each(function(){this.setAttribute("onclick","MatchingApp.HandleMobileDrop(this)")})}MatchingApp.AppData.HorizontalAlignment===!0&&$(".MI_aSlot").css("width","100%")},MatchingApp.buildInstructions=function(){var t,e=document.createElement("p");e.id="MAT_activityText",t=MatchingApp.mobileDevice===!0?"match"===MatchingApp.ActivityType?"report"===MatchingApp.AppData.FeedbackType?'Match each item to the appropriate category. Tap on "Check Answers" to see your results.':'Match each item to the appropriate category. Tap on "Check Answers" to see your progress.':"report"===MatchingApp.AppData.FeedbackType?'Sort each item into the appropriate category. Tap on "Check Answers" to see your results.':'Sort each item into to the appropriate category. Tap on "Check Answers" to see your progress.':"match"===MatchingApp.ActivityType?"report"===MatchingApp.AppData.FeedbackType?'Match each item to the appropriate category. For keyboard only users, use the tab key to select an answer from the list and use the enter key to select it. Use tab again to select the correct dropzone and then hit the enter key to confirm your answer. Select an answer and hit the delete key to return it to its original position. Use the "Check Answers" button to get your results.':'Match each item to the appropriate category. For keyboard only users, use the tab key to select an answer from the list and use the enter key to select it. Use tab again to select the correct dropzone and then hit the enter key to confirm your answer. Select an answer and hit the delete key to return it to its original position. Use the "Check Answers" to get your progress.':"report"===MatchingApp.AppData.FeedbackType?'Sort each item into the appropriate category. For keyboard only users, use the tab key to select an answer from the list and use the enter key to select it. Use tab again to select the correct dropzone and then hit the enter key to confirm your answer. Select an answer and hit the delete key to return it to its original position. Use the "Check Answers" button to get your results.':'Sort each item into the appropriate category. For keyboard only users, use the tab key to select an answer from the list and use the enter key to select it. Use tab again to select the correct dropzone and then hit the enter key to confirm your answer. Select an answer and hit the delete key to return it to its original position. Use the "Check Answers" to get your progress.',"none"!==MatchingApp.AppData.Instructions&&null!==MatchingApp.AppData.Instructions&&void 0!==MatchingApp.AppData.Instructions&&""!==MatchingApp.AppData.Instructions&&(t+="<br><br>"+MatchingApp.AppData.Instructions);var a=document.createElement("span");a.id="MAT_iToggle",a.setAttribute("tabindex","1"),$(a).addClass("iDown"),a.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>',$(a).click(function(){$(this).hasClass("iDown")===!0?($(this).removeClass("iDown"),$(this).addClass("iUp"),$("#MAT_activityText").slideUp(500),this.innerHTML='&#9660;<span class="sr-only">Collapse instructions</span>'):($(this).addClass("iDown"),$(this).removeClass("iUp"),$("#MAT_activityText").slideDown(500),this.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>')}),$(a).keyup(function(t){13===t.keyCode&&$(this).click()}),e.innerHTML=t,$(e).hide().appendTo(MAT_appContainer).fadeIn(),$(a).hide().appendTo(MAT_appContainer).fadeIn()},MatchingApp.assignOrigPos=function(){for(i=0;i<MatchingApp.questionData.length;i++){temp=document.getElementById("drag"+i);var t=temp.parentNode;MatchingApp.origPos.splice(i,1,t)}},MatchingApp.hLightEffect=function(t,e){return $(t).hasClass("dropped")===!1?(MatchingApp.hLightingEffect===!0&&MatchingApp.alreadySelected!==!0&&(e?$("#"+t.id).addClass("hover"):(idNum=parseInt(t.id.substr(4)),$("#"+t.id).removeClass("hover"))),!1):void 0},MatchingApp.allowDrop=function(t){t.preventDefault()},MatchingApp.allowRevert=function(t){t.preventDefault()},MatchingApp.checkDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.className.search("dropzone"))return!0},MatchingApp.checkParentDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.parentNode.className.search("dropzone"))return!0},MatchingApp.checkChildDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.lastChild.className.search("dropzone"))return!0},MatchingApp.checkSiblingDropzone=function(t){for(i=0;i<MatchingApp.questionData.length;i++)if(-1!==t.parentNode.parentNode.lastChild.className.search("dropzone"))return!0},MatchingApp.drag=function(t){MatchingApp.notifications===!0&&PNotify.removeAll();var e;if(MatchingApp.mobileDevice===!0&&MatchingApp.setHeight(),e=$(t.target).hasClass("draggableImage")===!0?t.target.parentNode:t.target,e.setAttribute("ondrop","MatchingApp.drop(event);"),$(t.target).hasClass("dropped")===!1){var a=navigator.appName;"Microsoft Internet Explorer"===a?t.dataTransfer.setData("text",e.id):t.dataTransfer.setData("Text",e.id),e.setAttribute("aria-grabbed","true"),e.setAttribute("aria-dropeffect","move")}},MatchingApp.drop=function(t){var e=navigator.appName;data="Microsoft Internet Explorer"===e?t.dataTransfer.getData("text"):t.dataTransfer.getData("Text");var a,i,n,p=document.getElementById(data);t.preventDefault(),MatchingApp.checkDropzone(t.target)&&"drag"===data.substr(0,4)?($_this=t.target,a=t.target.parentNode.id):MatchingApp.checkParentDropzone(t.target)&&"drag"===data.substr(0,4)?($_this=t.target.parentNode,a=t.target.parentNode.parentNode.id):MatchingApp.checkSiblingDropzone(t.target)&&"drag"===data.substr(0,4)?($_this=t.target.parentNode.parentNode.lastChild,a=t.target.parentNode.parentNode.id):MatchingApp.checkChildDropzone(t.target)&&"drag"===data.substr(0,4)&&($_this=t.target.lastChild,a=t.target.id);var c=[];return $.each($("#"+a+" .draggableTextNode"),function(t,e){c.push(e.getAttribute("id"))}),$.inArray(p.getAttribute("id"),c)>-1?!1:("undefined"!=typeof a&&(idNum=parseInt(a.substr(10)),i=MatchingApp.matchAmount[idNum],n=$($_this).children().length+1,p.setAttribute("aria-grabbed","false"),p.removeAttribute("aria-dropeffect"),p.removeAttribute("ondrop"),n>i&&MatchingApp.notifications===!0&&new PNotify({text:$($_this).attr("title")+" is full",type:"info"}),"match"===MatchingApp.ActivityType?$($_this).is(":empty")&&($(p).hasClass("collapsed")===!0&&$(p).removeClass("collapsed"),p.offsetHeight>26&&p.offsetHeight<=28&&$(p).addClass("fullExpand"),$_this.appendChild(p),MatchingApp.HandleMobileDrop()):i>=n&&($(p).hasClass("collapsed")===!0&&$(p).removeClass("collapsed"),p.offsetHeight>26&&p.offsetHeight<=28&&$(p).addClass("fullExpand"),$_this.appendChild(p),MatchingApp.HandleMobileDrop())),MatchingApp.checkAllAnswered(),$("#MAT_iToggle").hasClass("iDown")===!0&&$("#MAT_iToggle").click(),void $(p).removeClass("hover"))},MatchingApp.revert=function(t){data=t.dataTransfer.getData("Text");var e=parseInt(data.substr(4,data.length)),a=MatchingApp.origPos[e];t.preventDefault(),temp=document.getElementById(data),$(temp).hasClass("collapsed")===!0&&$(temp).removeClass("collapsed"),$(temp.firstChild).hasClass("MAT_expand")===!0&&$(temp.firstChild).remove(),document.getElementById(data).setAttribute("aria-grabbed","false"),document.getElementById(data).removeAttribute("aria-dropeffect"),a.appendChild(temp),MatchingApp.checkAllAnswered()},MatchingApp.revertKeyboard=function(t){var e=t.id,a=parseInt(e.substr(4,e.length)),i=MatchingApp.origPos[a];$(t).hasClass("collapsed")===!0&&$(t).removeClass("collapsed"),
$(t.firstChild).hasClass("MAT_expand")===!0&&$(t.firstChild).remove(),t.setAttribute("aria-grabbed","false"),t.removeAttribute("aria-dropeffect"),$(t).hide().appendTo(i).fadeIn(500),$("#screenAlert").html("Returned "+t.innerHTML+" to original position.").focus(),setTimeout(function(){$("#screenAlert").html("")},3e3),MatchingApp.ExitAccessDropMode(),MatchingApp.checkAllAnswered()},MatchingApp.evaluateScore=function(){for(var t='<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOUFFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5OEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5OUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PllHhcQAAACASURBVHjaYmIgB2zx7wBjIGAhSzMDQzmUzcBEtmYI4GeiQPMMIM5iokQzg8/G/0xQBYzkaAZxmKCap8FClRTNEANAmhkYMsAKkQ0hQjMsGj8i8UGGINgENIMAIw7bGIjRDPMCA1CyAkh2kqoZYQB2QwhqRngBM+T5idEMAgABBgBezD9OGUJHCwAAAABJRU5ErkJggg==" alt="right check mark" />',e='<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMThFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5Q0VBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxNkVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuBTV64AAAC/SURBVHjahJPRDcIwDETtCLEAjARSv/iL0hXoQGUFoi5QCUaCBfgJDnJQmubSSlak691zaqscQqA3n/dENEnNR3reCDwvOl3l6KTsITw+UTP6LoYvUqOaUHhU35T0BJgz7wqShan0/wB67aEGqYSH/DM5zoCZUScv5WrhmFsBAKTaGQIUci86ewn3uScBDJi2K2SHtmM2pu1b21kAwLR7tJ0FoLWq1orzG3Ro2gDy9+/0tFv/QtSlcwrbpH8FGAC2umDxE/BZxwAAAABJRU5ErkJggg==" alt="wrong x" />',a=setInterval(";"),i=0;a>i;i++)clearInterval(i);if("continuous"===MatchingApp.AppData.FeedbackType&&($(".correct").remove(),$(".wrong").remove()),"continuous"===MatchingApp.AppData.FeedbackType)for(i=0;i<MatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),tempPar=temp.parentNode.parentNode,tempComp=tempPar.id,ans=parseInt(tempComp.substr(10)),"MI_aSlot"===tempPar.getAttribute("class")&&(MatchingApp.qMatch[i]===MatchingApp.aMatch[ans]?(MatchingApp.scoreEval.push(1),$(temp.firstChild).hasClass("MAT_expand")===!0&&$(temp.firstChild).remove(),$(temp).prepend(t),$(temp).css("background-color","#EFE"),$(temp).disabled=!0,$(temp).hasClass("dropped")===!1&&$(temp).toggleClass("dropped")):(MatchingApp.scoreEval.push(0),$(temp.firstChild).hasClass("MAT_expand")===!0&&$(temp.firstChild).remove(),$(temp).prepend(e)));else{for(i=0;i<MatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),tempPar=temp.parentNode.parentNode,tempComp=tempPar.id,ans=parseInt(tempComp.substr(10)),MatchingApp.savedElements.push(temp.innerHTML),MatchingApp.savedAnswers.push(temp.parentNode.id),MatchingApp.qMatch[i]===MatchingApp.aMatch[ans]?MatchingApp.scoreEval.push(1):MatchingApp.scoreEval.push(0);"report"===MatchingApp.AppData.FeedbackType&&(MatchingApp.currentAttempts++,MatchingApp.onComplete(),MatchingApp.clearStage(),MatchingApp.buildReport())}},MatchingApp.calculateScore=function(){var t=0;for(i=0;i<MatchingApp.questionData.length;i++)switch(MatchingApp.scoreEval[i]){case 1:t+=1;break;default:t=t}return t},MatchingApp.checkAnswers=function(){MatchingApp.notifications===!0&&PNotify.removeAll(),MatchingApp.evaluateScore(),MatchingApp.mobileDevice===!1&&(MatchingApp.checkCollapse=setInterval("MatchingApp.checkForCollapse();",100));var t=MatchingApp.calculateScore(),e=$(".wrong");$("#MAT_progress").html("You currently have "+t+" items in the correct category."),$("#MAT_progress").css("color","red");for(var a=0,i=0;i<MatchingApp.matchAmount.length;i++)a+=MatchingApp.matchAmount[i];t===a&&(MatchingApp.finishedQuiz=!0,"continuous"===MatchingApp.AppData.FeedbackType&&($("#MAT_resetWrongButton").remove(),$(MatchingApp.resetButton).hide().appendTo($("#MAT_buttonSet")).fadeIn(500)),$("#MAT_progress").html("Congratulations, you have successfully matched all "+MatchingApp.questionData.length+" scenarios with their correct approach. You are ready to proceed to the next topic in the course.")),MatchingApp.scoreEval=[],MatchingApp.finishedQuiz===!1&&"continuous"===MatchingApp.AppData.FeedbackType&&e.length>0&&(document.getElementById("MAT_resetWrongButton").disabled=!1,$("#MAT_resetWrongButton").fadeIn(500))},MatchingApp.checkAllAnswered=function(){if("report"===MatchingApp.AppData.FeedbackType&&"undefined"!=typeof document.getElementById("MAT_checkButton")){for(var t=0,e=0;e<MatchingApp.matchAmount.length;e++)t+=MatchingApp.matchAmount[e];var a=$(".dropzone .draggableTextNode").length;a>=t?(document.getElementById("MAT_checkButton").disabled=!1,$("#MAT_checkButton").fadeIn(500)):(document.getElementById("MAT_checkButton").disabled=!0,$("#MAT_checkButton").fadeOut(500))}},MatchingApp.checkForCollapse=function(){$(".draggableTextNode").each(function(){if($(this.parentNode).hasClass("dropzone")===!0){if($(this.firstChild).hasClass("MAT_expand")===!0)$(this)[0].scrollWidth===parseInt($(this).innerWidth())&&$(this).hasClass("collapsed")===!0&&($(this.firstChild).remove(),$(this).removeClass("collapsed"),$(this).addClass("fullExpand"));else if($(this)[0].scrollWidth>parseInt($(this).innerWidth())||this.offsetHeight>28){var t=document.createElement("span");t.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>',$(t).addClass("MAT_expand"),$(t).click(function(){$(this.parentNode).hasClass("collapsed")===!0?($(this.parentNode).removeClass("collapsed"),$(t).addClass("expanded"),t.innerHTML='&#9660;<span class="sr-only">Collapse drag item</span>'):($(this.parentNode).addClass("collapsed"),$(t).removeClass("expanded"),t.innerHTML='&#9658;<span class="sr-only">Expand drag item</span>')}),$(t).keyup(function(t){13===t.keyCode&&$(this).click()}),$(this).prepend(t),$(this).hasClass("fullExpand")===!0&&$(this).removeClass("fullExpand")}this.offsetHeight>28&&$(this.firstChild).hasClass("expanded")===!1&&$(this).addClass("collapsed")}$(this.firstChild).hasClass("MAT_expand")===!1&&$(this).addClass("fullExpand")})},MatchingApp.reset=function(){for(MatchingApp.notifications===!0&&PNotify.removeAll(),MatchingApp.ti=1,$(".correct").remove(),$(".wrong").remove(),MatchingApp.scoreEval=[],i=0;i<MatchingApp.questionData.length;i++)temp=document.getElementById("drag"+i),$(temp).hasClass("dropped")===!0&&($(temp).toggleClass("dropped"),$(temp).css("background-color","none")),$(temp).hasClass("collapsed")===!0&&$(temp).removeClass("collapsed"),$(temp.firstChild).hasClass("MAT_expand")===!0&&$(temp.firstChild).remove(),$(temp).hide().appendTo(MatchingApp.origPos[i]).fadeIn(500);$(".draggableTextNode").each(function(){this.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++}),$("#MAT_progress").html('Click the "Check Answers" button to check your progress.'),$("#MAT_progress").css("color","black"),MatchingApp.HandleMobileDrop(),"continuous"===MatchingApp.AppData.FeedbackType&&(MatchingApp.finishedQuiz=!1,$("#MAT_resetButton").fadeOut(500,function(){$("#MAT_resetButton").remove()}),$("#MAT_buttonSet").append(MatchingApp.resetWrongButton),MatchingApp.sessionTimer=0,MatchingApp.currentAttempts++,MatchingApp.onComplete()),$("[tabindex=1]").focus()},MatchingApp.resetWrong=function(){for(MatchingApp.ti=1,MatchingApp.scoreEval=[],i=0;i<MatchingApp.questionData.length;i++){temp=document.getElementById("drag"+i);$(temp).children();$(temp.firstChild).hasClass("MAT_expand")===!0&&($(temp.firstChild).remove(),$(temp).removeClass("collapsed")),$(temp.firstChild).hasClass("wrong")===!0&&$(temp).hide().appendTo(MatchingApp.origPos[i]).fadeIn(500)}$(".draggableTextNode").each(function(){this.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++}),$(".wrong").remove(),document.getElementById("MAT_resetWrongButton").disabled=!0,$("#MAT_resetWrongButton").fadeOut(500),$("#MAT_progress").html('Click the "Check Answers" button to check your progress'),$("#MAT_progress").css("color","black"),MatchingApp.HandleMobileDrop(),$("[tabindex=1]").focus()},MatchingApp.setMobileSelect=function(t){var e;MatchingApp.notifications===!0&&PNotify.removeAll(),e=$(t.target.parentNode).hasClass("draggableTextNode")?t.target.parentNode:t.target,$(e.parentNode).hasClass("dropzone")?t.stopPropagation():(MatchingApp.EnterAccessDropMode(),MatchingApp.mobileDevice===!0&&MatchingApp.setHeight(),MatchingApp.alreadySelected===!1?(MatchingApp.alreadySelected=!0,$(e).addClass("dragMe"),$(e).css("border","thin dashed #D3D9E3"),null!==MatchingApp.AppData.DefaultSelectColor&&void 0!==MatchingApp.AppData.DefaultSelectColor&&"none"!==MatchingApp.AppData.DefaultSelectColor&&""!==MatchingApp.AppData.DefaultSelectColor,e.setAttribute("aria-grabbed","true"),MatchingApp.initMobileSelect(e)):$(e).hasClass("dragMe")===!0?($(e).removeClass("dragMe"),$(e).css("border","thin solid #D3D9E3"),idNum=parseInt(e.id.substr(4)),e.setAttribute("aria-grabbed","false"),MatchingApp.alreadySelected=!1,MatchingApp.HandleMobileDrop(),MatchingApp.ExitAccessDropMode()):(MatchingApp.HandleMobileDrop(),MatchingApp.alreadySelected=!1,$(e).addClass("dragMe"),$(e).css("border","thin dashed #D3D9E3"),idNum=parseInt(e.id.substr(4)),e.setAttribute("aria-grabbed","true"),MatchingApp.alreadySelected=!0,MatchingApp.initMobileSelect(e)))},MatchingApp.initMobileSelect=function(t){temp=t.innerHTML;var e=t.lastChild.alt,a="",i="";if(MatchingApp.selectedElements.push(temp),i=MatchingApp.selectedElements[0],a=MatchingApp.selectedElements[0],MatchingApp.droppedItem=a,void 0!==e&&(a=e,MatchingApp.droppedItem=a),null===document.getElementById("screenAlert")){var n=document.createElement("div");n.id="screenAlert",n.setAttribute("aria-live","assertive"),MatchingApp.containerRef.appendChild(n)}MatchingApp.ShowAccMessage("Selected: "+i),$("#screenAlert").html("Selected: "+a).focus(),setTimeout(function(){$("#screenAlert").html("")},3e3)},MatchingApp.HandleMobileDrop=function(t){var e="",a="";for(i=0;i<MatchingApp.selectedElements.length;i++)e+=i>0?", "+MatchingApp.selectedElements[i]:MatchingApp.selectedElements[i];""===e&&(e="none"),a=$(t).hasClass("dropzone")?"Dropped: "+MatchingApp.droppedItem+" into "+t.parentNode.firstChild.firstChild.innerHTML+" dropzone":"Dropped: "+MatchingApp.droppedItem,$("#screenAlert").html(a).focus(),setTimeout(function(){$("#screenAlert").html("")},3e3),MatchingApp.selectedElements=[];var n,p,c,o=$(".dragMe")[0];null!==t&&void 0!==t&&(n=t.parentNode.id,idNum=parseInt(n.substr(10)),p=MatchingApp.matchAmount[idNum],c=$(t).children().length+1);var s=[];return $.each($("#"+n+" .draggableTextNode"),function(t,e){s.push(e.getAttribute("id"))}),"undefined"!=typeof o&&$.inArray(o.getAttribute("id"),s)>-1?!1:("match"===MatchingApp.ActivityType?$(t).is(":empty")&&($(t).append($(o)),MatchingApp.ExitAccessDropMode()):p>=c&&($(t).append($(o)),MatchingApp.ExitAccessDropMode()),c>p&&MatchingApp.notifications===!0&&new PNotify({text:$(t).attr("title")+" is full",type:"info"}),$(o).removeClass("dragMe"),$(o).removeClass("hover"),$(o).css("border","thin solid #D3D9E3"),null!==o&&void 0!==o&&(idNum=parseInt(o.id.substr(4)),$(o).attr("aria-grabbed","false"),o.removeAttribute("ondrop")),MatchingApp.HideAccMessage(),MatchingApp.alreadySelected=!1,void MatchingApp.checkAllAnswered())},MatchingApp.initAccMAT=function(){var t=$(MatchingApp.accMATCont+".draggableTextNode");t.keydown(function(t){$(t.target).hasClass("dropped")||(13===t.which?MatchingApp.setMobileSelect(t):46===t.which&&MatchingApp.revertKeyboard(this))})},MatchingApp.ShowAccMessage=function(t){$("#AccMessageDisp").html(t),$("#AccMessageDisp").css("visibility","visible")},MatchingApp.HideAccMessage=function(){$("#AccMessageDisp").html(""),$("#AccMessageDisp").css("visibility","hidden")},MatchingApp.EnterAccessDropMode=function(){MatchingApp.mobileDevice===!0&&MatchingApp.setHeight(),$(".draggableTextNode").each(function(){$(this.firstChild).hasClass("MAT_expand")===!0&&(this.firstChild.setAttribute("tabindex","-1"),this.firstChild.setAttribute("aria-hidden","true")),this.setAttribute("tabindex","-1"),this.setAttribute("aria-hidden","true")}),$(".MAT_button").each(function(){this.setAttribute("tabindex","-1"),this.setAttribute("aria-hidden","true")}),ti=1,$(".dropzone").each(function(){this.setAttribute("tabindex",ti),ti++}),$(".dropzone").focus(MatchingApp.HandleAccessDropzoneFocus),$(".dropzone").blur(MatchingApp.HandleAccessDropzoneBlur)},MatchingApp.HandleAccessDropzoneBlur=function(){ansId=parseInt(this.parentNode.id.substr(10)),"none"===MatchingApp.savedBackgrounds[ansId],$(this).unbind("keyup",MatchingApp.HandleAccessDropRequest)},MatchingApp.HandleAccessDropzoneFocus=function(){ansId=parseInt(this.parentNode.id.substr(10)),"none"===MatchingApp.savedBackgrounds[ansId],$(this).keyup(MatchingApp.HandleAccessDropRequest),this.setAttribute("onclick","MatchingApp.HandleMobileDrop(this)")},MatchingApp.HandleAccessDropRequest=function(t){13===t.which&&($(this).click(),setTimeout(function(){MatchingApp.ExitAccessDropMode()},200))},MatchingApp.ExitAccessDropMode=function(){MatchingApp.ti=1,$(".draggableTextNode").each(function(){$(this.firstChild).hasClass("MAT_expand")===!0&&(this.firstChild.setAttribute("tabindex",MatchingApp.ti),this.firstChild.setAttribute("aria-hidden","false"),MatchingApp.ti++),this.setAttribute("tabindex",MatchingApp.ti),this.setAttribute("aria-hidden","false"),MatchingApp.ti++}),MatchingApp.checkAnswersButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++,"continuous"===MatchingApp.AppData.FeedbackType?(MatchingApp.resetWrongButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++):(MatchingApp.resetButton.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++),$("#MAT_instructions").attr("tabindex",MatchingApp.ti),MatchingApp.ti++,$(".MAT_button").each(function(){this.setAttribute("aria-hidden","false")}),$(".dropzone").unbind("focus",MatchingApp.HandleAccessDropzoneFocus),$(".dropzone").unbind("blur",MatchingApp.HandleAccessDropzoneBlur),$(".dropzone").each(function(){MatchingApp.mobileDevice===!1&&this.removeAttribute("onclick"),ansId=parseInt(this.parentNode.id.substr(10)),this.setAttribute("tabindex",-1),"none"===MatchingApp.savedBackgrounds[ansId],$(this).unbind("keyup",MatchingApp.HandleAccessDropRequest),this.blur()}),MatchingApp.HideAccMessage(),setTimeout(function(){$("[tabindex=1]").focus()},100)},MatchingApp.touchDrag=function(t){MatchingApp.mobileDevice===!0&&MatchingApp.setHeight();var e=t.target,a=e.id,i=parseInt(a.substr(4,a.length)),n=MatchingApp.origPos[i];$(e).addClass("absolute"),n.appendChild(e);var p=t.targetTouches[0];e.style.left=p.pageX-$(e).width()/2+"px",e.style.top=p.pageY-$(e).height()/2+"px",t.preventDefault();var c=$("body").scrollLeft(),o=$("body").scrollTop();e.addEventListener("touchend",function(t){var a,i,n,p=document.elementFromPoint(t.changedTouches[0].pageX-c,t.changedTouches[0].pageY-o);if($(e).removeClass("absolute"),e.removeAttribute("style"),p){var s=document.getElementById(p.id);"connect_box dropzone"===s.className?(a=p.parentNode.id,idNum=parseInt(a.substr(10)),i=MatchingApp.matchAmount[idNum],n=$(p).children().length+1,"match"===MatchingApp.ActivityType?$(s).is(":empty")&&(p.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))):i>=n&&(p.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4)))):"connect_box dropzone"===s.parentNode.className&&(a=p.parentNode.parentNode.id,idNum=parseInt(a.substr(10)),i=MatchingApp.matchAmount[idNum],n=$(p.parentNode).children().length+1,"match"===MatchingApp.ActivityType?$(s.parentNode).is(":empty")&&(p.parentNode.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))):i>=n&&(p.parentNode.appendChild(e),$(e).addClass("fullExpand"),idNum=parseInt(e.id.substr(4))))}$("#MAT_iToggle").hasClass("iDown")===!0&&$("#MAT_iToggle").click(),MatchingApp.checkAllAnswered()})},MatchingApp.EmbedMedia=function(t,e){var a,i,n=document.createElement("div");switch(n.setAttribute("class","MAT_Media"),e.type){case"link":i=document.createElement("a"),i.setAttribute("class","MAT_MediaLink"),i.setAttribute("href",e.src),i.setAttribute("target","_blank"),i.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++,e.description?i.innerHTML=e.description:i.innerHTML="Link",n.appendChild(i);break;case"image":"none"!==e.mediaLink&&null!==e.mediaLink&&void 0!==e.mediaLink&&""!==e.mediaLink&&(a=document.createElement("a"),a.setAttribute("class","MAT_MediaImage"),a.setAttribute("href",e.mediaLink),a.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++,a.setAttribute("target","_blank")),i=document.createElement("img"),"none"!==e.mediaLink&&null!==e.mediaLink&&void 0!==e.mediaLink&&""!==e.mediaLink||i.setAttribute("class","MAT_MediaImage"),i.setAttribute("src",e.src),"none"!==e.width&&null!==e.width&&void 0!==e.width&&""!==e.width?i.setAttribute("width",e.width):i.setAttribute("width","420"),"none"!==e.height&&null!==e.height&&void 0!==e.height&&""!==e.height?i.setAttribute("height",e.height):i.setAttribute("height","315"),n.setAttribute("style","text-align:center;"),e.description&&i.setAttribute("alt",e.description),"none"===e.mediaLink||null===e.mediaLink||void 0===e.mediaLink||""===e.mediaLink?n.appendChild(i):(a.appendChild(i),n.appendChild(a));break;case"YouTubeVideo":validSrc=MatchingApp.validateYouTubeLink(e.src),validSrc&&(i=document.createElement("iframe"),i.setAttribute("class","MAT_MediaEmbeddedVideo"),"none"!==e.width&&null!==e.width&&void 0!==e.width&&""!==e.width?i.setAttribute("width",e.width):i.setAttribute("width","420"),"none"!==e.height&&null!==e.height&&void 0!==e.height&&""!==e.height?i.setAttribute("height",e.height):i.setAttribute("height","315"),i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.setAttribute("src",validSrc),n.setAttribute("style","text-align:center;"),e.description&&i.setAttribute("alt",e.description),n.appendChild(i),a=document.createElement("a"),a.setAttribute("class","MAT_MediaAltLink"),a.setAttribute("href",e.altLink),a.setAttribute("tabindex",MatchingApp.ti),MatchingApp.ti++,a.setAttribute("target","_blank"),a.innerHTML="Alternate Link.",n.appendChild(a));break;case"text":i=document.createElement("p"),i.setAttribute("class","MAT_MediaText"),i.setAttribute("target","_blank"),i.innerHTML=e.content,n.appendChild(i)}$(n).hide().appendTo(t).fadeIn(500)},MatchingApp.validateYouTubeLink=function(t){return-1!==t.indexOf("www.youtube.com")?-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")?(code=t.slice(t.indexOf("?v=")+3),"https://www.youtube.com/embed/"+code):!1:-1!==t.indexOf("https://www.youtube.com/embed/")?t.slice(t.indexOf("src")+5,t.indexOf('"',t.indexOf("src")+5)):!1:!1},MatchingApp.timer=function(){MatchingApp.sessionTimer++},MatchingApp.setHeight=function(){if(MatchingApp.heightSet===!1&&MatchingApp.mobileDevice===!0){var t=$("#qColum_1").height();$("#MAT_qColContainer").css("min-height",t+20+"px"),MatchingApp.heightSet=!0}},MatchingApp.onComplete=function(){};