(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=!0,window.GraphicSelectApp=function(){function i(){this.HandleResizeEvent=e(this.HandleResizeEvent,this),this.mergeObjectData=e(this.mergeObjectData,this),this.msieversion=e(this.msieversion,this),this.buildAnswerReferences=e(this.buildAnswerReferences,this),this.shuffle=e(this.shuffle,this),this.validateYouTubeLink=e(this.validateYouTubeLink,this),this.EmbedMedia=e(this.EmbedMedia,this),this.CheckAllSubmits=e(this.CheckAllSubmits,this),this.buildReportButtons=e(this.buildReportButtons,this),this.buildReport=e(this.buildReport,this),this.BuildFeedback=e(this.BuildFeedback,this),this.BuildResultTable=e(this.BuildResultTable,this),this.GetQuestionScore=e(this.GetQuestionScore,this),this.BuildMiniReport=e(this.BuildMiniReport,this),this.GenerateQuestionFeedback=e(this.GenerateQuestionFeedback,this),this.ResetQuestionAnswers=e(this.ResetQuestionAnswers,this),this.CheckAnswer=e(this.CheckAnswer,this),this.HandleKeyboardSelection=e(this.HandleKeyboardSelection,this),this.HandleSelection=e(this.HandleSelection,this),this.addQuestions=e(this.addQuestions,this),this.buildTable=e(this.buildTable,this),this.buildInstructions=e(this.buildInstructions,this),this.toggleInstructions=e(this.toggleInstructions,this),this.buildActivityButtons=e(this.buildActivityButtons,this),this.buildActivity=e(this.buildActivity,this),this.buildPostActivityButtons=e(this.buildPostActivityButtons,this),this.buildPostActivity=e(this.buildPostActivity,this),this.buildPreActivityButtons=e(this.buildPreActivityButtons,this),this.buildPreActivity=e(this.buildPreActivity,this),this.clearStage=e(this.clearStage,this),this.loadButtons=e(this.loadButtons,this),this.buildAppFrame=e(this.buildAppFrame,this),this.buildApp=e(this.buildApp,this),this.getAppData=e(this.getAppData,this),this.setupApp=e(this.setupApp,this),this.resetActivityData=e(this.resetActivityData,this)}return i.prototype._defaultQuestionFile="data/multiselectDefaultData.txt",i.prototype._questionFile=void 0,i.prototype._appData=void 0,i.prototype._currentAttempts=0,i.prototype._containerRef=null,i.prototype._appContainer=void 0,i.prototype._mobileDevice=!1,i.prototype._finalReport=!1,i.prototype._continuousFeedback=null,i.prototype._reportFeedback=null,i.prototype._endReport=null,i.prototype._tabIndex=2,i.prototype._currentQuestion=0,i.prototype._pageNum=0,i.prototype._restartButton=null,i.prototype._startButton=null,i.prototype._nextButton=null,i.prototype._backButton=null,i.prototype._instructionButton=null,i.prototype._submitAllButton=null,i.prototype._submitInterval=null,i.prototype._usingIE=!1,i.prototype._questionCheck=[],i.prototype._allCheck=[],i.prototype._correctAnswers=[],i.prototype._allCorrect=[],i.prototype._submitCheck=[],i.prototype._headingLevel=1,i.prototype._noPost=null,i.prototype.resetActivityData=function(){this._currentQuestion=0,this._pageNum=0,this._finalReport=!1,this._submitInterval=null,this._tabIndex=2,this._allCheck=[],this._allCorrect=[],this._submitCheck=[]},i.prototype.setupApp=function(t,e){this._questionFile=t,null!==document.getElementById(e)?(this._containerRef=document.getElementById(e),this.getAppData(function(t){return function(){return t.getAppData(t.buildApp,t._questionFile)}}(this),this._defaultQuestionFile)):this.d2log("Error! Missing Proper DOM object.")},i.prototype.getAppData=function(t,e){var i;i=$.getJSON(e,function(e){return function(i){e._appData?e._appData=e.mergeObjectData(i.valueOf(),e._appData.valueOf()):e._appData=i,t(e._appData)}}(this)),i.fail(function(t){return function(e){t.d2log("ERROR!!: failed to load data from specified file. Ensure file is at that location and that JSON data is vaild. (tip: use a vaildator like: http://jsonformatter.curiousconcept.com/ )"),t.d2log(e)}}(this))},i.prototype.buildApp=function(){var t;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this._mobileDevice=!0),this._usingIE=this.msieversion(),t=parseInt(this._appData.HeadingLevel),(isNaN(t)||1>t)&&(t=1),t>2&&(t=2),this._headingLevel=t,this._continuousFeedback=this._appData.ProvideContinuous,this._reportFeedback=this._appData.ProvideQuestionReport,this._endReport=this._appData.ProvideEndReport,this._continuousFeedback===!1&&("all"===this._appData.QuestionDisplay?this._endReport===!1&&(this._continuousFeedback=!0):"single"===this._appData.QuestionDisplay&&this._reportFeedback===!1&&this._endReport===!1&&(this._continuousFeedback=!0)),this.Questions=this._appData.Questions,this._appData.Randomize===!0&&this.shuffle(this.Questions),!("none"!==this._appData.PostActivityText&&void 0!==this._appData.PostActivityText&&null!==this._appData.PostActivityText&&""!==this._appData.PostActivityText||"none"!==this._appData.PostActivityMedia&&void 0!==this._appData.PostActivityMedia&&null!==this._appData.PostActivityMedia&&""!==this._appData.PostActivityMedia)?this._noPost=!0:this._noPost=!1,this.buildAppFrame(),this.loadButtons(),this.buildAnswerReferences(),"none"===this._appData.PreActivityText&&"none"===this._appData.PreActivityMedia?this.buildActivity():this.buildPreActivity(),this.HandleResizeEvent(),$(this._containerRef).addClass("rs_preserve")},i.prototype.buildAppFrame=function(){var t,e,i;t=document.createElement("section"),t.id="GS_container",e=document.createElement("section"),e.id="GS_content",i=document.createElement("section"),i.id="GS_header",$(i).addClass("bg-dark"),i.innerHTML="<h"+this._headingLevel+">"+this._appData.ActivityName+("</h"+this._headingLevel+">"),t.appendChild(e),$(t).appendTo(this._containerRef),$(i).hide().appendTo(e).slideDown(500,"swing"),this._appContainer=document.createElement("div"),this._appContainer.id="GS_appContainer",e.appendChild(this._appContainer)},i.prototype.loadButtons=function(){var t,e,i,n,s,a,o,r,d,c,l,u;i=document.createElement("div"),i.setAttribute("class","GS_buttonIcon"),o=document.createElement("button"),o.id="GS_restartButton",o.setAttribute("class","GS_button"),o.setAttribute("title","Restarts the Activity"),o.onclick=function(t){return function(){t.clearStage(),t.resetActivityData(),t.buildAnswerReferences(),"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?t.buildActivity():t.buildPreActivity()}}(this),r=document.createElement("span"),r.setAttribute("class","GS_buttonLabel"),r.innerHTML="Reset Activity",o.appendChild(i),o.appendChild(r),this._restartButton=o,i=document.createElement("div"),i.setAttribute("class","GS_buttonIcon"),d=document.createElement("button"),d.id="GS_startButton",d.setAttribute("class","GS_button"),d.setAttribute("title","Starts the Activity"),d.onclick=function(t){return function(){t.clearStage(),t._pageNum++,t.buildActivity()}}(this),c=document.createElement("span"),c.setAttribute("class","GS_buttonLabel"),c.innerHTML="Start Activity",d.appendChild(i),d.appendChild(c),this._startButton=d,i=document.createElement("div"),i.setAttribute("class","GS_buttonIcon"),s=document.createElement("button"),s.id="GS_nextButton",s.setAttribute("class","GS_button"),s.setAttribute("title","Moves to the Next Part of the Activity"),s.onclick=function(t){return function(){var e;if(t._currentQuestion++,t._pageNum++,"single"===t._appData.QuestionDisplay)t._reportFeedback===!1&&t._endReport===!0&&t._finalReport===!1&&t.CheckAnswer(t._currentQuestion-1,"next"),t._currentQuestion<t.Questions.length?(t.clearStage(),t.buildActivity()):t._endReport===!0&&t._finalReport===!1?(t._finalReport=!0,t.clearStage(),t.buildReport()):t._noPost===!0?(t.clearStage(),t.resetActivityData(),t.buildAnswerReferences(),"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?t.buildActivity():t.buildPreActivity()):(t.clearStage(),t.buildPostActivity(),t._currentAttempts++);else if("all"===t._appData.QuestionDisplay){for(e=0;e<t.Questions.length;)t.CheckAnswer(e,"next"),e++;clearInterval(t._submitInterval),t._finalReport===!1&&t._endReport===!0?(t._finalReport=!0,t.clearStage(),t.buildReport()):t._noPost===!0?(t.clearStage(),t.resetActivityData(),t.buildAnswerReferences(),"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?t.buildActivity():t.buildPreActivity()):(t.clearStage(),t.buildPostActivity(),t._currentAttempts++)}t.HandleResizeEvent()}}(this),a=document.createElement("span"),a.setAttribute("class","GS_buttonLabel"),s.appendChild(i),s.appendChild(a),this._nextButton=s,i=document.createElement("div"),i.setAttribute("class","GS_buttonIcon"),t=document.createElement("button"),t.id="GS_backButton",t.setAttribute("class","GS_button"),t.setAttribute("title","Moves to the Previous Part of the Activity"),t.onclick=function(t){return function(){t.clearStage(),t._currentQuestion--,t._pageNum--,t._currentQuestion<0&&(t._currentQuestion=0),0===t._pageNum?"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?t.buildActivity():t.buildPreActivity():t.buildActivity()}}(this),e=document.createElement("span"),e.setAttribute("class","GS_buttonLabel"),e.innerHTML="Go Back",t.appendChild(i),t.appendChild(e),this._backButton=t,i=document.createElement("div"),i.setAttribute("class","GS_buttonIcon"),n=document.createElement("button"),n.id="GS_instructionButton",n.alt="Instruction toggle",n.setAttribute("class","GS_button"),n.setAttribute("title","Toggles the Instructions"),n.onclick=function(t){return function(){t.toggleInstructions()}}(this),this._instructionButton=n,i=document.createElement("div"),i.setAttribute("class","GS_buttonIcon"),l=document.createElement("button"),l.id="GS_submitAllButton",l.setAttribute("class","GS_button"),l.setAttribute("title","Submits all answers at once"),l.onclick=function(t){return function(){var e;for(e=0;e<t.Questions.length;)document.getElementById("GS_submitButton"+e).disabled===!1&&$("#GS_submitButton"+e).click(),e++;document.getElementById("GS_nextButton").disabled=!1,clearInterval(t._submitInterval)}}(this),u=document.createElement("span"),u.setAttribute("class","GS_buttonLabel"),u.innerHTML="Submit All",l.appendChild(i),l.appendChild(u),this._submitAllButton=l},i.prototype.clearStage=function(){$("#GS_appContainer").empty()},i.prototype.buildPreActivity=function(){var t,e,i,n;if(e=!1,i=!1,"none"!==this._appData.PreActivityText&&(t=document.createElement("p"),t.id="GS_preActivityText",t.innerHTML=this._appData.PreActivityText,$(t).hide().appendTo(this._appContainer).fadeIn(500)),"none"!==this._appData.PreActivityMedia)for(n=0;n<this._appData.PreActivityMedia.length;)"image"===this._appData.PreActivityMedia[n].type?e=!0:"YouTubeVideo"===this._appData.PreActivityMedia[n].type&&(i=!0),this.EmbedMedia("page",this._appContainer,this._appData.PreActivityMedia[n]),n++;i===!1&&e===!1?this.buildPreActivityButtons():$(".embedMedia:last").load(function(t){return function(){t.buildPreActivityButtons(),t.HandleResizeEvent()}}(this)),$("#head").attr("tabindex","1").css("outline","none"),$("#head").focus(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},i.prototype.buildPreActivityButtons=function(){var t;t=document.createElement("div"),t.id="GS_buttonSet",this._appContainer.appendChild(t),t.appendChild(this._startButton)},i.prototype.buildPostActivity=function(){var t,e,i,n;if(e=!1,i=!1,t=void 0,"none"!==this._appData.PostActivityText?(t=document.createElement("p"),t.id="GS_postActivityText",t.innerHTML=this._appData.PostActivityText,$(t).hide().appendTo(this._appContainer).fadeIn(500)):(t=document.createElement("p"),t.id="GS_postActivityText",t.innerHTML="You have completed the activity!",$(t).hide().appendTo(this._appContainer).fadeIn(500)),"none"!==this._appData.PostActivityMedia)for(n=0;n<this._appData.PostActivityMedia.length;)"image"===this._appData.PostActivityMedia[n].type?e=!0:"YouTubeVideo"===this._appData.PostActivityMedia[n].type&&(i=!0),this.EmbedMedia("page",this._appContainer,this._appData.PostActivityMedia[n]),n++;i===!1&&e===!1?this.buildPostActivityButtons():$(".embedMedia:last").load(function(t){return function(){t.buildPostActivityButtons(),t.HandleResizeEvent()}}(this)),$("#head").attr("tabindex","1").css("outline","none"),$("#head").focus(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},i.prototype.buildPostActivityButtons=function(){var t;t=document.createElement("div"),t.id="GS_buttonSet",this._appContainer.appendChild(t),t.appendChild(this._restartButton)},i.prototype.buildActivity=function(){$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3);var t,e,i,n,s,a;if(e=!1,"all"===this._appData.QuestionDisplay&&this._continuousFeedback===!0&&this._endReport===!1){for(i=0;i<this.Questions.length;)this._submitCheck.push(!1),i++;this._submitInterval=setInterval(this.CheckAllSubmits,250)}this._tabIndex=2,t=document.createElement("p"),t.id="GS_instructions","single"===this._appData.QuestionDisplay?a=this._continuousFeedback===!1&&this._reportFeedback===!1&&this._endReport===!0?this._appData.Instruct_common+" "+this._appData.Instruct_01+" "+this._appData.Instructions_KeyUserText+"<br><br>":this._appData.Instruct_common+" "+this._appData.Instruct_02+" "+this._appData.Instructions_KeyUserText+"<br><br>":"all"===this._appData.QuestionDisplay&&(a=this._continuousFeedback===!0&&this._endReport===!1?this._appData.Instruct_common+" "+this._appData.Instruct_03+" "+this._appData.Instructions_KeyUserText+"<br><br>":this._appData.Instruct_common+" "+this._appData.Instruct_04+" "+this._appData.Instructions_KeyUserText+"<br><br>"),a+=this._appData.Instructions,t.innerHTML=a,$(t).hide().appendTo(this._appContainer).fadeIn(500);var o=document.createElement("span");for(o.id="GS_iToggle",o.setAttribute("tabindex","1"),$(o).addClass("iDown"),o.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>',$(o).click(function(){$(this).hasClass("iDown")===!0?($(this).removeClass("iDown"),$(this).addClass("iUp"),$("#GS_instructions").slideUp(500),this.innerHTML='&#9660;<span class="sr-only">Collapse instructions</span>'):($(this).addClass("iDown"),$(this).removeClass("iUp"),$("#GS_instructions").slideDown(500),this.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>')}),$(o).keyup(function(t){13===t.keyCode&&$(this).click()}),$(o).hide().appendTo(this._appContainer).fadeIn(500),this.buildTable(),this.addQuestions(),n=0;n<this._appData.Answers.length;)s=document.getElementById("head"+n),$(s.firstChild).hasClass("tableHeadImage")&&(e=!0),n++;e===!0?$(".tableHeadImage:last").load(function(t){return function(){t.buildActivityButtons()}}(this)):e===!1&&this.buildActivityButtons(),$("#head").attr("tabindex","1").css("outline","none"),$("#head").focus()},i.prototype.buildActivityButtons=function(){var t;t=document.createElement("div"),t.id="GS_buttonSet",$(t).hide().appendTo(this._appContainer).fadeIn(500),this._appData.AllowPrevious===!0&&"single"===this._appData.QuestionDisplay&&this._pageNum>0&&t.appendChild(this._backButton),"all"===this._appData.QuestionDisplay&&this._appData.SubmitAll===!0&&t.appendChild(this._submitAllButton),t.appendChild(this._nextButton),"single"===this._appData.QuestionDisplay?this._continuousFeedback===!1&&this._reportFeedback===!1&&this._endReport===!0?document.getElementById("GS_nextButton").disabled=!1:(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").hide()):"all"===this._appData.QuestionDisplay&&this._continuousFeedback===!0&&this._endReport===!1&&(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").hide()),"single"===this._appData.QuestionDisplay?this._currentQuestion<this.Questions.length-1?document.getElementById("GS_nextButton").lastChild.innerHTML="Next Question":this._noPost===!0&&this._endReport===!1?document.getElementById("GS_nextButton").lastChild.innerHTML="Reset Activity":document.getElementById("GS_nextButton").lastChild.innerHTML="Finish Activity":"all"===this._appData.QuestionDisplay&&(this._noPost===!0&&this._endReport===!1?document.getElementById("GS_nextButton").lastChild.innerHTML="Reset Activity":document.getElementById("GS_nextButton").lastChild.innerHTML="Finish Activity"),this.HandleResizeEvent()},i.prototype.toggleInstructions=function(){$("#GS_instructionsToggle").toggle(),$("#GS_instructionsToggle").focus(),$("#GS_instructionsToggle").attr("role","alert"),$("#GS_instructionsToggle").attr("aria-live","assertive"),this.HandleResizeEvent()},i.prototype.buildInstructions=function(){var t,e,i;t=document.createElement("div"),t.id="GS_instructionButtonSet",this._appContainer.appendChild(t),this._instructionButton.setAttribute("tabindex",this._tabIndex),this._tabIndex++,t.appendChild(this._instructionButton),i=document.createElement("div"),i.id="GS_instructionsToggle",i.setAttribute("class","toggledOff"),e=document.createElement("p"),e.id="GS_instructionText",e.setAttribute("class","tooltip"),"single"===this._appData.QuestionDisplay?this._continuousFeedback===!1&&this._reportFeedback===!1&&this._endReport===!0?e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_01+" <br><br> "+this._appData.Instructions_KeyUserText:e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_02+" <br><br> "+this._appData.Instructions_KeyUserText:"all"===this._appData.QuestionDisplay&&(this._continuousFeedback===!0&&this._endReport===!1?e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_03+" <br><br> "+this._appData.Instructions_KeyUserText:e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_04+" <br><br> "+this._appData.Instructions_KeyUserText),i.appendChild(e),$(i).insertBefore("#GS_instructionButtonSet"),$("#GS_instructionsToggle").toggle()},i.prototype.buildTable=function(){var t,e,i,n,s,a,o,r,d,c;for(a=document.createElement("div"),d=void 0,a.id="GS_tableContainer",s=document.createElement("table"),s.id="GS_table",t=document.createElement("thead"),t.id="GS_tHead",n=document.createElement("tr"),n.setAttribute("class","GS_tRow"),e=document.createElement("th"),e.id="GS_tHeading",$(e).addClass("bg-table"),e.innerHTML="<p>"+this._appData.TableHeading+"</p>",e.setAttribute("scope","col"),this._usingIE===!0&&e.setAttribute("title",this._appData.TableHeading),e.setAttribute("tabindex",this._tabIndex),this._tabIndex++,n.appendChild(e),o=0;o<this._appData.Answers.length;)d=document.createElement("th"),d.id="head"+o,d.setAttribute("class","GS_tAnswer"),d.setAttribute("scope","col"),this._usingIE===!0&&(d.title=this._appData.Answers[o].text),d.setAttribute("tabindex",this._tabIndex),this._tabIndex++,"none"!==this._appData.Answers[o].imgSrc&&null!==this._appData.Answers[o].imgSrc&&void 0!==this._appData.Answers[o].imgSrc&&""!==this._appData.Answers[o].imgSrc&&(r=document.createElement("img"),r.src=this._appData.Answers[o].imgSrc,r.alt=this._appData.Answers[o].alt,r.setAttribute("class","tableHeadImage"),d.appendChild(r)),c=document.createElement("p"),c.innerHTML=this._appData.Answers[o].text,d.appendChild(c),n.appendChild(d),o++;i=document.createElement("th"),i.id="GS_tResults",i.setAttribute("scope","col"),i.setAttribute("tabindex",this._tabIndex),this._tabIndex++,n.appendChild(i),t.appendChild(n),s.appendChild(t),a.appendChild(s),$(a).hide().appendTo(this._appContainer).fadeIn(500)},i.prototype.addQuestions=function(){var t,e,i,n,s,a,o,r,d,c,l,u,p,h,b;if(h=void 0,p=void 0,b=void 0,d=void 0,l=void 0,c=void 0,u=void 0,s=void 0,i=void 0,n=void 0,t=void 0,e=void 0,r=void 0,s=document.createElement("tbody"),s.id="GS_tBody",a=$("#GS_table")[0],"all"===this._appData.QuestionDisplay)for(o=0;o<this.Questions.length;){for(p=document.createElement("tr"),p.id="row"+o,p.setAttribute("class","GS_tRow"),l=document.createElement("th"),l.id="question"+o,l.setAttribute("class","GS_tQuestion"),l.setAttribute("scope","row"),this._usingIE===!0&&(this._appData.NumberedQuestions===!0?l.setAttribute("title",o+1+". "+this.Questions[o].text):l.setAttribute("title",this.Questions[o].text)),l.setAttribute("tabindex",this._tabIndex),this._tabIndex++,o===this.Questions.length-1&&$(l).addClass("last"),c=document.createElement("p"),this._appData.NumberedQuestions===!0?c.innerHTML=o+1+". "+this.Questions[o].text:c.innerHTML=this.Questions[o].text,l.appendChild(c),p.appendChild(l),r=0;r<this._appData.Answers.length;)h=document.createElement("td"),h.id="GS_tCheck"+o+r,h.setAttribute("class","GS_tCheckBox"),o===this.Questions.length-1&&$(h).addClass("last"),b=document.createElement("p"),b.setAttribute("class","GS_feedback"),b.innerHTML="Your Answer:",d=document.createElement("div"),d.id="checkbox"+o+r,d.setAttribute("class","GS_tInput check"),d.setAttribute("role","checkbox"),d.setAttribute("aria-checked","false"),d.setAttribute("tabindex",this._tabIndex),this._tabIndex++,d.onclick=function(t){return function(e){t.HandleSelection(e),$("#GS_iToggle").hasClass("iDown")===!0&&$("#GS_iToggle").click()}}(this),d.onkeydown=function(t){return function(e){13!==e.which&&32!==e.which||(t.HandleSelection(e),$("#GS_iToggle").hasClass("iDown")===!0&&$("#GS_iToggle").click())}}(this),h.appendChild(b),h.appendChild(d),p.appendChild(h),r++;u=document.createElement("td"),u.id="results"+o,u.setAttribute("class","GS_tQuestionResults"),o===this.Questions.length-1&&$(u).addClass("last"),this._continuousFeedback===!0&&(i=document.createElement("button"),i.id="GS_submitButton"+o,i.setAttribute("class","GS_resultButton"),i.setAttribute("title","Submits your answer"),i.setAttribute("tabindex",this._tabIndex),this._tabIndex++,i.onclick=function(){var t,e;t=window.application,t.CheckAnswer(this,"submit"),e=this.id.substr(15),t._submitCheck.splice(e,1,!0)},n=document.createElement("span"),n.setAttribute("class","GS_buttonLabel"),n.innerHTML="Submit",i.appendChild(n),u.appendChild(i)),t=document.createElement("button"),t.id="GS_resetButton"+o,t.setAttribute("class","GS_resultButton"),t.setAttribute("title","Resets your answer"),t.setAttribute("tabindex",this._tabIndex),this._tabIndex+=2,t.onclick=function(){var t,e;t=window.application,t.ResetQuestionAnswers(this),e=this.id.substr(14),t._submitCheck.splice(e,1,!1)},e=document.createElement("span"),e.setAttribute("class","GS_buttonLabel"),e.innerHTML="Reset Answers",t.appendChild(e),u.appendChild(t),p.appendChild(u),s.appendChild(p),a.appendChild(s),o++}else if("single"===this._appData.QuestionDisplay){for(p=document.createElement("tr"),p.id="row"+this._currentQuestion,p.setAttribute("class","GS_tRow"),l=document.createElement("th"),l.id="question"+this._currentQuestion,l.setAttribute("class","GS_tQuestion"),l.setAttribute("scope","row"),l.setAttribute("tabindex",this._tabIndex),this._tabIndex++,$(l).addClass("last"),c=document.createElement("p"),c.innerHTML=this._currentQuestion+1+". "+this.Questions[this._currentQuestion].text,l.appendChild(c),p.appendChild(l),r=0;r<this._appData.Answers.length;)h=document.createElement("td"),h.id="GS_tCheck"+this._currentQuestion+r,h.setAttribute("class","GS_tCheckBox"),$(h).addClass("last"),b=document.createElement("p"),b.setAttribute("class","GS_feedback"),b.innerHTML="Your Answer:",d=document.createElement("div"),d.id="checkbox"+this._currentQuestion+r,d.setAttribute("class","GS_tInput check"),d.setAttribute("role","checkbox"),d.setAttribute("aria-checked","false"),d.setAttribute("tabindex",this._tabIndex),d.setAttribute("onclick","window.application.HandleSelection(event)"),d.setAttribute("onkeydown","window.application.HandleKeyboardSelection(event)"),this._allCheck[this._currentQuestion][r]===!0&&$(d).addClass("selected"),this._tabIndex++,h.appendChild(b),h.appendChild(d),p.appendChild(h),r++;u=document.createElement("td"),u.id="results"+this._currentQuestion,u.setAttribute("class","GS_tQuestionResults"),$(u).addClass("last"),this._continuousFeedback!==!0&&this._reportFeedback!==!0||(i=document.createElement("button"),i.id="GS_submitButton"+this._currentQuestion,i.setAttribute("class","GS_resultButton"),i.setAttribute("title","Submits your answer"),i.setAttribute("tabindex",this._tabIndex),this._tabIndex++,i.onclick=function(){var t;t=window.application,t.CheckAnswer(this,"submit"),t._reportFeedback===!0&&($("#GS_report"+this.id.substr(15)).length&&$("#GS_report"+this.id.substr(15)).remove(),t.BuildMiniReport(this.id.substr(15))),document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)},n=document.createElement("span"),n.setAttribute("class","GS_buttonLabel"),n.innerHTML="Submit",i.appendChild(n),u.appendChild(i)),t=document.createElement("button"),t.id="GS_resetButton"+this._currentQuestion,t.setAttribute("class","GS_resultButton"),t.setAttribute("title","Resets your answer"),t.setAttribute("tabindex",this._tabIndex),this._tabIndex+=2,t.onclick=function(){var t;t=window.application,t.ResetQuestionAnswers(this),t._reportFeedback===!0&&$("#GS_report"+this.id.substr(14)).length&&$("#GS_report"+this.id.substr(14)).remove(),"single"===t._appData.QuestionDisplay&&(t._continuousFeedback===!1&&t._reportFeedback===!1&&t._endReport===!0?(document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)):(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").fadeOut(500))),t.HandleResizeEvent()},e=document.createElement("span"),e.setAttribute("class","GS_buttonLabel"),e.innerHTML="Reset Answers",t.appendChild(e),u.appendChild(t),p.appendChild(u),s.appendChild(p),a.appendChild(s)}},i.prototype.HandleSelection=function(t){var e;e=t.target,$(e).hasClass("check")&&($(e).hasClass("selected")?($(e).removeClass("selected"),e.setAttribute("aria-checked","false")):($(e).addClass("selected"),e.setAttribute("aria-checked","true")))},i.prototype.HandleKeyboardSelection=function(t){13!==t.which&&32!==t.which||this.HandleSelection(t)},i.prototype.CheckAnswer=function(t,e){var i,n,s,a;for(n=void 0,s=void 0,"next"===e?s=t:"submit"===e?(n=t.id,s=n.substr(15)):"submitAll"===e&&(s=t,document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)),i=0;i<this._appData.Answers.length;)a=document.getElementById("checkbox"+s+i),$(a).hasClass("selected")===!0?this._allCheck[s].splice(i,1,!0):this._allCheck[s].splice(i,1,!1),i++;"submit"!==e&&"submitAll"!==e||this.GenerateQuestionFeedback(s)},i.prototype.ResetQuestionAnswers=function(t){var e,i,n,s;for(i=t.id,n=i.substr(14),e=0;e<this._appData.Answers.length;)$(document.getElementById("GS_tCheck"+n+e).lastChild).hasClass("GS_corrAnsImg")===!0&&$(document.getElementById("GS_tCheck"+n+e).lastChild).remove(),$(document.getElementById("GS_tCheck"+n+e).lastChild).hasClass("GS_feedback")===!0&&$(document.getElementById("GS_tCheck"+n+e).lastChild).remove(),s=document.getElementById("GS_tCheck"+n+e).lastChild,s.removeAttribute("title"),s.setAttribute("class","GS_tInput check"),s.setAttribute("role","checkbox"),s.setAttribute("aria-checked","false"),s.setAttribute("onclick","application.HandleSelection(event)"),s.setAttribute("onkeydown","application.HandleKeyboardSelection(event)"),$(".GS_tInput").css("cursor","pointer"),e++;$(document.getElementById("results"+n).lastChild).hasClass("GS_feedback")===!0&&$(document.getElementById("GS_qFeedback"+n)).remove(),document.getElementById("GS_submitButton"+n)&&(document.getElementById("GS_submitButton"+n).disabled=!1,$("#GS_submitButton"+n).fadeIn(500))},i.prototype.GenerateQuestionFeedback=function(t){var e,i,n,s,a,o,r,d;for(d=void 0,n=void 0,a=0,o=document.getElementById("results"+t),document.getElementById("GS_submitButton"+t).disabled=!0,$("#GS_submitButton"+t).fadeOut(500),$("#GS_resetButton"+t).focus(),s=0;s<this._appData.Answers.length;)e=document.getElementById("GS_tCheck"+t+s).lastChild,this._allCheck[t][s]===this._allCorrect[t][s]?(a++,e.setAttribute("class","GS_tInput"),this._allCheck[t][s]===!0?($(e).addClass("selected"),e.setAttribute("title","Selected checkbox graphic. Correctly answered.")):e.setAttribute("title","Unselected checkbox graphic. Correctly answered."),e.removeAttribute("role"),e.removeAttribute("aria-checked"),e.removeAttribute("onclick"),e.removeAttribute("onkeydown"),$(".GS_tInput").css("cursor","default"),$(e).addClass("disabled"),d=document.createElement("p"),d.setAttribute("class","GS_feedback"),d.innerHTML="Correct Answer:",document.getElementById("GS_tCheck"+t+s).appendChild(d),n=document.createElement("img"),n.setAttribute("class","GS_corrAnsImg"),this._allCorrect[t][s]===!0?(n.src="../../facilitator_tools/Multiselect/img/icon-checked-24.png",n.alt="Selected checkbox graphic",document.getElementById("GS_tCheck"+t+s).appendChild(n)):(n.src="../../facilitator_tools/Multiselect/img/icon-unchecked-24.png",n.alt="Unselected checkbox graphic",document.getElementById("GS_tCheck"+t+s).appendChild(n))):(e.setAttribute("class","GS_tInput"),this._allCheck[t][s]===!0?($(e).addClass("selected"),e.setAttribute("title","Selected checkbox graphic. Incorrectly answered.")):e.setAttribute("title","Unselected checkbox graphic. Incorrectly answered."),e.removeAttribute("role"),e.removeAttribute("aria-checked"),e.removeAttribute("onclick"),e.removeAttribute("onkeydown"),$(".GS_tInput").css("cursor","default"),$(e).addClass("disabled"),d=document.createElement("p"),d.setAttribute("class","GS_feedback"),d.innerHTML="Correct Answer:",document.getElementById("GS_tCheck"+t+s).appendChild(d),n=document.createElement("img"),n.setAttribute("class","GS_corrAnsImg"),this._allCorrect[t][s]===!0?(n.src="../../facilitator_tools/Multiselect/img/icon-checked-24.png",n.alt="Selected checkbox graphic",document.getElementById("GS_tCheck"+t+s).appendChild(n)):(n.src="../../facilitator_tools/Multiselect/img/icon-unchecked-24.png",n.alt="Unselected checkbox graphic",document.getElementById("GS_tCheck"+t+s).appendChild(n))),s++;$(o.lastChild).hasClass("GS_feedback")===!0&&$(document.getElementById("GS_qFeedback"+t)).remove(),r=document.getElementById("GS_resetButton"+t),this._continuousFeedback===!0&&(i=document.createElement("p"),i.id="GS_qFeedback"+t,i.setAttribute("class","GS_feedback"),i.setAttribute("tabindex",r.tabIndex+1),i.setAttribute("role","alert"),i.setAttribute("aria-live","assertive"),i.innerHTML="<strong>"+a+" / "+this._appData.Answers.length+" Correct</strong>",o.appendChild(i))},i.prototype.BuildMiniReport=function(t){var e,i,n,s,a,o,r;i=void 0,n=document.createElement("div"),n.id="GS_report"+t,n.setAttribute("class","GS_report"),this._finalReport===!0&&(i=document.createElement("h"+(this._headingLevel+1)),i.setAttribute("class","GS_questionHead"),i.innerHTML="Question: "+this.Questions[t].text),e=document.createElement("h"+(this._headingLevel+2)),e.setAttribute("class","GS_responseText"),a=document.createElement("img"),a.setAttribute("class","GS_responseGraphic"),s=document.createElement("strong"),r=this.GetQuestionScore(t),o=this._appData.Answers.length,r>=o?(a.setAttribute("src","../../facilitator_tools/Multiselect/img/icon-right-24.png"),a.setAttribute("alt","Right Answer Graphic."),s.innerHTML="Your answer was correct. You scored "+r+" of a possible "+o+" on this question."):0===r?(a.setAttribute("src","../../facilitator_tools/Multiselect/img/icon-wrong-24.png"),a.setAttribute("alt","Wrong Answer Graphic"),s.innerHTML="Your answer was not correct. You scored "+r+" of a possible "+o+" on this question."):(a.setAttribute("src","../../facilitator_tools/Multiselect/img/icon-partial-24.png"),a.setAttribute("alt","Partially Correct Answer Graphic"),s.innerHTML="Your answer was partially correct. You scored "+r+" of a possible "+o+" on this question."),e.appendChild(a),e.appendChild(s),this._finalReport===!0&&n.appendChild(i),n.appendChild(e),this._finalReport===!0?$(n).hide().appendTo(this._appContainer).fadeIn(500):$(n).hide().insertAfter($("#GS_tableContainer")).fadeIn(500),o>r&&this.BuildResultTable(t),this.BuildFeedback(t,n),this.HandleResizeEvent()},i.prototype.GetQuestionScore=function(t){var e,i;for(i=0,
e=0;e<this._appData.Answers.length;)this._allCheck[t][e]===this._allCorrect[t][e]&&i++,e++;return i},i.prototype.BuildResultTable=function(t){var e,i,n,s,a,o,r,d,c,l,u,p,h,b,_,m,A;for(c=document.getElementById("GS_report"+t),h=document.createElement("div"),h.id="GS_resultTableContainer"+t,p=document.createElement("table"),p.id="GS_resultTable"+t,p.setAttribute("class","GS_resultTable"),r=document.createElement("thead"),r.id="GS_resultTableHead"+t,u=document.createElement("tr"),u.setAttribute("class","GS_tRow"),m=document.createElement("th"),m.id="GS_user"+t,m.setAttribute("class","GS_resultUser"),m.setAttribute("scope","col"),m.innerHTML="<strong>Your Answers</strong>",u.appendChild(m),a=document.createElement("th"),a.id="GS_correct"+t,a.setAttribute("class","GS_resultCorrect"),a.setAttribute("scope","col"),a.innerHTML="<strong>Results</stong>",u.appendChild(a),r.appendChild(u),p.appendChild(r),e=document.createElement("tbody"),e.id="GS_resultTableBody"+t,d=0;d<this._appData.Answers.length;)n="<img src='../../facilitator_tools/Multiselect/img/icon-checked-24.png' class='GS_reportIcon' alt='Checked Box Graphic' />",b="<img src='../../facilitator_tools/Multiselect/img/icon-unchecked-24.png' class='GS_reportIcon' alt='Unchecked Box Graphic' />",l="<img src='../../facilitator_tools/Multiselect/img/icon-right-24.png' class='GS_reportIcon' alt='Right Answer Graphic' />",A="<img src='../../facilitator_tools/Multiselect/img/icon-wrong-24.png' class='GS_reportIcon' alt='Wrong Answer Graphic' />",i=void 0,o=void 0,u=document.createElement("tr"),u.id="resultRow"+t+d,_=document.createElement("td"),_.id="userAnswer"+t+d,_.setAttribute("class","GS_userAnswer"),i=this._allCheck[t][d]===!0?n:b,_.innerHTML=i+"<p class='GS_reportText'>"+this._appData.Answers[d].text+"</p>",d===this._appData.Answers.length-1&&$(_).addClass("last"),s=document.createElement("td"),s.id="correctAnswer"+t+d,s.setAttribute("class","GS_correctAnswer"),o=this._allCheck[t][d]===this._allCorrect[t][d]?l+"<p class='GS_reportText'>Correct</p>":A+"<p class='GS_reportText'>Incorrect</p>",s.innerHTML=o,d===this._appData.Answers.length-1&&$(s).addClass("last"),u.appendChild(_),u.appendChild(s),e.appendChild(u),d++;p.appendChild(e),h.appendChild(p),c.appendChild(h)},i.prototype.BuildFeedback=function(t,e){var i,n,s,a,o,r,d;for(r=!0,n=document.createElement("div"),n.id="GS_feedbackCont"+t,n.setAttribute("class","GS_feedbackCont bg-light"),s=document.createElement("h"+(this._headingLevel+2)),s.setAttribute("class","GS_feedbackHead"),s.innerHTML="Feedback: ",n.appendChild(s),this._appData.ShowQuestionFeedback===!0&&null!==this.Questions[t].questionFeedback&&void 0!==this.Questions[t].questionFeedback&&"none"!==this.Questions[t].questionFeedback&&""!==this.Questions[t].questionFeedback&&(i=document.createElement("p"),i.innerHTML=this.Questions[t].questionFeedback,n.appendChild(i),r=!1),a=0;a<this.Questions[t].answers.length;){if(this._allCheck[t][a]!==this._allCorrect[t][a])for("none"!==this.Questions[t].answers[a].feedback&&null!==this.Questions[t].answers[a].feedback&&void 0!==this.Questions[t].answers[a].feedback&&""!==this.Questions[t].answers[a].feedback&&(o=0);o<this.Questions[t].answers[a].feedback.length;)"text"===this.Questions[t].answers[a].feedback[o].type&&(d=document.createElement("h"+(this._headingLevel+3)),d.setAttribute("class","GS_option"),d.innerHTML=this._appData.Answers[a].text+": ",n.appendChild(d),this.EmbedMedia("feedback",n,this.Questions[t].answers[a].feedback[o]),r=!1),o++;a++}r===!1&&$(n).hide().appendTo(e).slideDown(500,"swing")},i.prototype.buildReport=function(){var t;for(t=0;t<this.Questions.length;)this.BuildMiniReport(t),t++;this.buildReportButtons(),$(".d2l-page-title",window.parent.document).length>0&&$("body",window.parent.document).animate({scrollTop:$(".d2l-page-title",window.parent.document).offset().top},1e3)},i.prototype.buildReportButtons=function(){var t;t=document.createElement("div"),t.id="GS_buttonSet",this._appContainer.appendChild(t),t.appendChild(this._nextButton),this._noPost===!0?document.getElementById("GS_nextButton").lastChild.innerHTML="Reset Activity":document.getElementById("GS_nextButton").lastChild.innerHTML="Continue"},i.prototype.CheckAllSubmits=function(){var t,e;for(e=0,t=0;t<this._submitCheck.length;)this._submitCheck[t]===!1&&e++,t++;0===e?(document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)):(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").fadeOut(500))},i.prototype.EmbedMedia=function(t,e,i){var n,s,a,o,r;switch(s=void 0,a=void 0,r=void 0,o=document.createElement("div"),o.setAttribute("class","GS_Media"),"feedback"===t?$(o).addClass("feedbackMedia"):"page"===t&&$(o).addClass("pageMedia"),i.type){case"link":s=document.createElement("a"),s.setAttribute("class","GS_MediaLink"),s.setAttribute("href",i.src),s.setAttribute("target","_blank"),i.description?s.innerHTML=i.description:s.innerHTML="Link",o.appendChild(s);break;case"audio":s=document.createElement("audio"),s.id=i.id,s.setAttribute("class","GS_MediaAudio"),s.setAttribute("target","_blank"),s.innerHTML='<source src="'+i.mp3+'" type="audio/mpeg"><source src="'+i.ogg+'" type="audio/ogg"><source src="'+i.wav+'" type="audio/wav"> Your browser does not support the audio tag.',o.appendChild(s),n=document.createElement("button"),n.setAttribute("class","GS_audioButton"),n.setAttribute("title","Play Audio Button"),n.onclick=function(){var t;t=document.getElementById(i.id),t.play()},o.appendChild(n);break;case"image":"none"!==i.mediaLink&&null!==i.mediaLink&&void 0!==i.mediaLink&&""!==i.mediaLink&&(a=document.createElement("a"),a.setAttribute("class","GS_MediaImageLink"),a.setAttribute("href",i.mediaLink),a.setAttribute("target","_blank")),s=document.createElement("img"),s.setAttribute("class","GS_MediaImage embedMedia"),s.setAttribute("src",i.src),"none"!==i.width?s.setAttribute("width",i.width):s.setAttribute("width","420"),"none"!==i.height?s.setAttribute("height",i.height):s.setAttribute("height","315"),o.setAttribute("style","text-align:center;"),i.description&&s.setAttribute("alt",i.description),s.onerror=function(){s.setAttribute("src","../../facilitator_tools/Multiselect/img/placeholder-error.png"),s.setAttribute("alt","Error. Image could not be loaded.")},s.onload=function(t){return function(){return t.HandleResizeEvent()}}(this),"none"===i.mediaLink||null===i.mediaLink||void 0===i.mediaLink||""===i.mediaLink?o.appendChild(s):(a.appendChild(s),o.appendChild(a));break;case"YouTubeVideo":r=this.validateYouTubeLink(i.src),r?(s=document.createElement("iframe"),s.setAttribute("class","GS_MediaEmbeddedVideo embedMedia"),s.setAttribute("width","420"),s.setAttribute("height","315"),s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen","true"),s.setAttribute("src",r),"page"===t&&o.setAttribute("style","text-align:center;"),i.description&&s.setAttribute("alt",i.description),o.appendChild(s),a=document.createElement("a"),a.setAttribute("class","GS_MediaAltLink"),a.setAttribute("href",i.altLink),a.setAttribute("target","_blank"),a.innerHTML="Alternate Link.",o.appendChild(a)):(s=document.createElement("img"),s.setAttribute("class","GS_MediaImage embedMedia"),s.setAttribute("src","../../facilitator_tools/Multiselect/img/placeholder-error.png"),s.setAttribute("alt","Error. Video could not be loaded."),s.setAttribute("width","420"),s.setAttribute("width","360"),"page"===t&&o.setAttribute("style","text-align:center;"),o.appendChild(s));break;case"text":s=document.createElement("p"),s.setAttribute("class","GS_MediaText"),s.setAttribute("target","_blank"),s.innerHTML=i.content,o.appendChild(s)}$(o).hide().appendTo(e).fadeIn(500)},i.prototype.validateYouTubeLink=function(t){var e;return e=void 0,-1!==t.indexOf("www.youtube.com")?-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")?(e=t.slice(t.indexOf("?v=")+3),"https://www.youtube.com/embed/"+e):!1:-1!==t.indexOf("https://www.youtube.com/embed/")?t.slice(t.indexOf("src")+5,t.indexOf('"',t.indexOf("src")+5)):!1:!1},i.prototype.shuffle=function(t){var e,i,n;for(i=void 0,n=void 0,e=t.length;e;)i=Math.floor(Math.random()*e),n=t[--e],t[e]=t[i],t[i]=n;return t},i.prototype.buildAnswerReferences=function(){var t,e,i;for(e=0;e<this.Questions.length;){for(this._questionCheck=[],this._correctAnswers=[],i=0;i<this._appData.Answers.length;)t=!1,this.Questions[e].answers[i].check===!0&&(t=!0),this._questionCheck.push(!1),this._correctAnswers.push(t),i++;this._allCheck.push(this._questionCheck),this._allCorrect.push(this._correctAnswers),e++}},i.prototype.msieversion=function(){var t,e;return e=window.navigator.userAgent,t=e.indexOf("MSIE "),!!(t>0||navigator.userAgent.match(/Trident.*rv\:11\./))},i.prototype.d2log=function(e){"undefined"!=typeof t&&t&&console.log(e)},i.prototype.mergeObjectData=function(t,e){var i,n;if(n=t,void 0===e.constructor||null===e.constructor)return n;if(e.constructor!==Object)return e;for(i=0;i<Object.keys(e).length;)void 0===n[Object.keys(e)[i]]?n[Object.keys(e)[i]]=e[Object.keys(e)[i]]:"object"==typeof n[Object.keys(e)[i]]&&this.mergeObjectData(n[Object.keys(e)[i]],e[Object.keys(e)[i]]),i++;return n},i.prototype.HandleResizeEvent=function(){var t;try{return t=window.document.body.getBoundingClientRect(),window.parent.document.getElementsByTagName("iframe")[0].style.height=t.height+t.top+20+"px"}catch(e){return this.d2log("Resize Error: Not in LE.")}},i}()}).call(this);